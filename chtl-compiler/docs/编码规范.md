# CHTL 编译器编码规范

## 命名规范

### 1. 类和结构体
- 使用**大驼峰命名法**（PascalCase）
- 示例：`CompilerDispatcher`, `CHTLUnifiedScanner`, `TokenType`

### 2. 函数和方法
- 使用**大驼峰命名法**（PascalCase）
- 示例：`Compile()`, `GetInstance()`, `ProcessFile()`

### 3. 变量
- 成员变量使用 `m_` 前缀 + 大驼峰命名
- 局部变量使用小驼峰命名法
- 示例：
  ```cpp
  class Example {
  private:
      std::string m_FileName;    // 成员变量
      int m_LineNumber;          // 成员变量
      
  public:
      void Process() {
          std::string localVariable;  // 局部变量
          int lineCount;             // 局部变量
      }
  };
  ```

### 4. 常量和枚举
- 常量使用全大写，单词间用下划线分隔
- 枚举类型使用大驼峰，枚举值使用全大写
- 示例：
  ```cpp
  const int MAX_BUFFER_SIZE = 1024;
  
  enum class TokenType {
      IDENTIFIER,
      KEYWORD,
      OPERATOR
  };
  ```

### 5. 命名空间
- 使用小写字母
- 示例：`namespace chtl { namespace utils { } }`

### 6. 文件命名
- 头文件和源文件使用大驼峰命名法
- 示例：`CompilerDispatcher.h`, `StringUtils.cpp`

## 代码风格

### 1. 缩进和空格
- 使用 4 个空格缩进
- 操作符两边添加空格
- 逗号后添加空格

### 2. 大括号风格
```cpp
class ClassName {
public:
    void FunctionName() {
        if (condition) {
            // code
        } else {
            // code
        }
    }
};
```

### 3. 注释规范
- 使用中文注释
- 类和函数使用文档注释
```cpp
/**
 * 编译器调度器
 * 负责协调各个编译器组件
 */
class CompilerDispatcher {
    // ...
};
```

### 4. 头文件保护
- 使用 `#pragma once`

### 5. 包含顺序
1. 对应的头文件（如果是源文件）
2. C++ 标准库
3. 第三方库
4. 项目内部头文件

## 编程实践

### 1. RAII（资源获取即初始化）
- 使用智能指针管理动态内存
- 使用 RAII 管理文件、锁等资源

### 2. 异常处理
- 使用异常处理错误情况
- 提供详细的错误信息

### 3. const 正确性
- 尽可能使用 const
- 成员函数不修改对象状态时标记为 const

### 4. 移动语义
- 合理使用移动构造函数和移动赋值运算符
- 使用 std::move 避免不必要的拷贝

## 示例代码

```cpp
#pragma once

#include <string>
#include <memory>

namespace chtl {

/**
 * CHTL 编译器基类
 */
class CompilerBase {
public:
    CompilerBase() = default;
    virtual ~CompilerBase() = default;
    
    // 编译源代码
    virtual bool Compile(const std::string& source) = 0;
    
    // 获取编译结果
    virtual std::string GetResult() const = 0;
    
    // 设置调试模式
    void SetDebugMode(bool debug) { m_DebugMode = debug; }
    
protected:
    bool m_DebugMode = false;
    std::string m_Result;
};

} // namespace chtl
```