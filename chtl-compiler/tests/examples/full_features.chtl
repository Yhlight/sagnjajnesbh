// CHTL 完整特性展示

[Configuration] {
    title: "CHTL Full Features Demo";
    lang: "zh-CN";
}

[Import] "./styles/common.css" @Style
[Import] "./scripts/utils.js" @JavaScript

[Namespace] MyApp {
    
    // 定义模板
    [Template] @Style Card {
        .card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 16px;
            margin: 8px;
        }
    }
    
    [Template] @Element Button($text, $type) {
        button {
            class: btn btn-$type;
            text { $text }
        }
    }
    
    // 自定义元素
    [Custom] @Element Header {
        header {
            style {
                .header {
                    background: #f0f0f0;
                    padding: 20px;
                }
            }
            
            h1 { text { "CHTL 完整特性演示" } }
            nav {
                a { href: "#intro"; text { "介绍" } }
                a { href: "#features"; text { "特性" } }
                a { href: "#examples"; text { "示例" } }
            }
        }
    }
}

// 主文档
html {
    head {
        meta { charset: "UTF-8"; }
        meta { name: "viewport"; content: "width=device-width, initial-scale=1.0"; }
        
        style {
            body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
            }
        }
    }
    
    body {
        -- 页面头部
        Header {}
        
        main {
            id: content;
            
            // 变量定义
            $title: "CHTL 语言";
            $version: "2.0";
            
            section {
                id: intro;
                
                h2 { text { "介绍 $title $version" } }
                
                // CE对等式示例
                div {
                    class = intro-box;  // 使用等号
                    style {
                        .intro-box {
                            background: #f9f9f9;
                            padding: 20px;
                        }
                        
                        &:hover {
                            background: #f0f0f0;
                        }
                    }
                    
                    p {
                        text {
                            CHTL是基于C++语言实现的超文本语言，
                            提供更符合开发者编写HTML代码的方式。
                        }
                    }
                }
            }
            
            section {
                id: features;
                
                h2 { text { "核心特性" } }
                
                // 局部样式块示例
                div {
                    style {
                        .feature-grid {
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                            gap: 20px;
                        }
                        
                        .feature-card {
                            border: 1px solid #e0e0e0;
                            padding: 20px;
                            border-radius: 8px;
                        }
                    }
                    
                    // 使用模板
                    div {
                        class: feature-card;
                        h3 { text { "局部样式块" } }
                        p { text { "在元素内定义样式，自动生成类名" } }
                    }
                    
                    div {
                        class: feature-card;
                        h3 { text { "CE对等式" } }
                        p { text { "冒号和等号完全等价" } }
                    }
                    
                    div {
                        class: feature-card;
                        h3 { text { "模板系统" } }
                        p { text { "可复用的样式和元素模板" } }
                    }
                }
            }
            
            section {
                id: examples;
                
                h2 { text { "代码示例" } }
                
                // Origin 原始代码嵌入
                [Origin] @Html {
                    <pre><code>// CHTL 示例代码
div {
    id: example;
    class: code-block;
    
    style {
        .code-block {
            background: #f5f5f5;
            padding: 16px;
        }
    }
    
    text { "Hello CHTL!" }
}</code></pre>
                }
                
                // 局部脚本块
                div {
                    id: interactive;
                    
                    Button("点击我", "primary") {}
                    
                    script {
                        document.getElementById('interactive').addEventListener('click', function() {
                            alert('CHTL 脚本块工作正常！');
                        });
                    }
                }
            }
        }
        
        footer {
            style {
                background: #333;
                color: white;
                padding: 20px;
                text-align: center;
                margin-top: 40px;
            }
            
            text { "© 2024 CHTL Project - MIT License" }
        }
    }
}