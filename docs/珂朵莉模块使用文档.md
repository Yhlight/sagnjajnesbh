# 珂朵莉模块使用文档

## 🌸 模块概述

珂朵莉模块（Chtholly Module）是CHTL项目的旗舰模块，以《末日时在做什么？有没有空？可以来拯救吗？》中的珂朵莉·诺塔·瑟尼欧里斯（Chtholly Nota Seniorious）命名。该模块体现了珂朵莉"温柔而坚强、优雅而执着"的性格特质，专注于提供精美的UI组件和强大的CJMOD扩展功能。

**模块类型：** 混合模块（CMOD + CJMOD）  
**版本：** 1.0.0  
**许可：** MIT  
**主题色彩：** 天空蓝、樱花粉、纯净白

## 🎨 设计理念

### 角色映射
- **温柔体贴** → 用户友好的交互设计
- **坚强勇敢** → 强大稳定的功能实现
- **优雅美丽** → 精致的视觉效果
- **守护精神** → 可靠的组件保护

### 视觉风格
- **主色调：** 天空蓝 (#87CEEB) 
- **辅助色：** 樱花粉 (#FFB6C1)
- **背景色：** 纯净白 (#FFFFFF)
- **文本色：** 温暖灰 (#666666)

## 📦 模块结构

```
Chtholly/
├── CMOD/              # CHTL组件模块
│   ├── Core/          # 核心样式和工具
│   ├── Accordion/     # 手风琴组件
│   ├── ShutterGallery/# 百叶窗图片库
│   ├── Memo/          # 便签组件
│   ├── SakuraRain/    # 樱花雨效果
│   ├── WarmNote/      # 温馨便签
│   ├── MouseEffect/   # 鼠标特效
│   ├── MouseTrail/    # 鼠标轨迹
│   ├── ParallaxBackground/ # 视差背景
│   ├── ContextMenu/   # 右键菜单栏
│   └── ProgressBar/   # 进度条组件
└── CJMOD/             # C++扩展模块
    ├── printMylove/   # ASCII艺术生成器
    └── iNeverAway/    # 高级事件系统
```

## 🚀 快速开始

### 导入珂朵莉模块

```chtl
// 导入完整模块
[Import] @Chtl from Chtholly;
[Import] @CJmod from Chtholly;

// 或导入特定组件
[Import] @Chtl from Chtholly.Core;
[Import] @Chtl from Chtholly.Accordion;
```

### 基础使用示例

```chtl
html {
    head {
        title { text { 珂朵莉的网页 } }
        
        // 应用核心样式
        ChthollyCore();
    }
    
    body {
        div {
            class: "chtholly-container";
            
            h1 {
                text { 欢迎来到珂朵莉的世界 }
            }
            
            // 使用手风琴组件
            ChthollyAccordion {
                title: "关于珂朵莉";
                content: "温柔而坚强的少女，守护着重要的人们...";
            }
            
            // 使用进度条
            ChthollyProgressSystem {
                // 会自动创建演示界面
            }
        }
    }
}
```

## 🧩 CMOD组件详解

### 1. Core - 核心模块

提供珂朵莉主题的基础样式和工具函数。

```chtl
[Import] @Chtl from Chtholly.Core;

div {
    // 应用核心样式
    ChthollyCore();
    
    // 使用核心变量
    style {
        color: var(--chtholly-primary);
        background: var(--chtholly-background);
        padding: var(--chtholly-spacing-md);
    }
}
```

**提供的CSS变量：**
```css
--chtholly-primary: #87CEEB;     /* 天空蓝 */
--chtholly-secondary: #FFB6C1;   /* 樱花粉 */
--chtholly-accent: #F0F8FF;      /* 爱丽丝蓝 */
--chtholly-text: #666;           /* 温暖灰 */
--chtholly-spacing-sm: 8px;      /* 小间距 */
--chtholly-spacing-md: 16px;     /* 中间距 */
--chtholly-spacing-lg: 24px;     /* 大间距 */
```

### 2. Accordion - 手风琴组件

优雅的折叠面板组件，支持多种配置。

```chtl
[Import] @Chtl from Chtholly.Accordion;

// 基础用法
ChthollyAccordion {
    title: "标题文本";
    content: "内容文本";
    isOpen: true;          // 可选，默认折叠
    theme: "sky";          // 可选：sky, sakura, pure
}

// 多个手风琴
div {
    class: "accordion-group";
    
    ChthollyAccordion {
        title: "关于珂朵莉";
        content: "她是最后的妖精，守护着大家...";
        theme: "sky";
    }
    
    ChthollyAccordion {
        title: "樱花的回忆";
        content: "在樱花飞舞的季节里...";
        theme: "sakura";
    }
}
```

### 3. ProgressBar - 进度条组件

美观的进度条系统，支持线性和环形两种样式。

```chtl
[Import] @Chtl from Chtholly.ProgressBar;

// 线性进度条
ChthollyProgressBar {
    value: 75;             // 当前值
    max: 100;              // 最大值
    label: "加载中...";    // 标签文本
    showPercentage: true;  // 显示百分比
}

// 环形进度条
ChthollyCircularProgress {
    value: 60;
    max: 100;
    size: 120;             // 直径（像素）
    strokeWidth: 8;        // 线条宽度
    showValue: true;       // 显示数值
}

// 完整演示系统
ChthollyProgressSystem {
    // 自动创建包含两种进度条的演示界面
    // 包含控制按钮、状态显示和动画效果
}
```

### 4. ContextMenu - 右键菜单栏

功能丰富的上下文菜单系统。

```chtl
[Import] @Chtl from Chtholly.ContextMenu;

div {
    class: "content-area";
    
    // 应用右键菜单系统
    ChthollyContextMenuSystem {
        // 会自动为当前区域添加右键菜单功能
        // 包含常用操作、设置面板和特效
    }
    
    text { 在这里右键试试看~ }
}
```

**菜单功能：**
- 基础操作（复制、粘贴、刷新等）
- 樱花特效切换
- 音效控制
- 主题设置
- 关于信息

### 5. SakuraRain - 樱花雨特效

浪漫的樱花飘落动画效果。

```chtl
[Import] @Chtl from Chtholly.SakuraRain;

body {
    // 添加樱花雨背景
    ChthollyStylizedSakuraRain {
        density: "medium";     // 密度：low, medium, high
        speed: "slow";         // 速度：slow, normal, fast
        color: "#FFB6C1";      // 樱花颜色
        autoStart: true;       // 自动开始
    }
    
    // 页面内容
    div {
        class: "main-content";
        // 你的内容...
    }
}
```

### 6. MouseEffect/MouseTrail - 鼠标特效

为鼠标添加优雅的视觉效果。

```chtl
[Import] @Chtl from Chtholly.MouseEffect;
[Import] @Chtl from Chtholly.MouseTrail;

body {
    // 鼠标点击特效
    ChthollyMouseEffectSystem {
        effectType: "sparkle"; // sparkle, ripple, heart
        color: "#87CEEB";
        duration: 1000;        // 持续时间（毫秒）
    }
    
    // 鼠标轨迹
    ChthollyMouseTrailSystem {
        trailType: "star";     // star, dot, line
        color: "#FFB6C1";
        length: 10;            // 轨迹长度
        fadeTime: 500;         // 淡出时间
    }
}
```

### 7. ShutterGallery - 百叶窗图片库

优雅的图片展示组件。

```chtl
[Import] @Chtl from Chtholly.ShutterGallery;

div {
    class: "gallery-container";
    
    ChthollyShutterGallery {
        images: [
            "image1.jpg",
            "image2.jpg", 
            "image3.jpg"
        ];
        autoPlay: true;        // 自动播放
        interval: 3000;        // 切换间隔（毫秒）
        showThumbnails: true;  // 显示缩略图
        effect: "shutter";     // 百叶窗效果
    }
}
```

### 8. Memo/WarmNote - 便签组件

可爱的便签和温馨笔记组件。

```chtl
[Import] @Chtl from Chtholly.Memo;
[Import] @Chtl from Chtholly.WarmNote;

// 简单便签
ChthollyMemo {
    content: "记住要给珂朵莉买苹果派~";
    color: "yellow";       // yellow, pink, blue, green
    size: "small";         // small, medium, large
    editable: true;        // 可编辑
}

// 温馨便签
ChthollyWarmNote {
    title: "珂朵莉的话";
    content: "即使世界末日来临，我也会保护大家！";
    mood: "determined";    // happy, sad, determined, peaceful
    showAvatar: true;      // 显示角色头像
}
```

### 9. ParallaxBackground - 视差背景

动态视差背景效果。

```chtl
[Import] @Chtl from Chtholly.ParallaxBackground;

body {
    ChthollyParallaxBackground {
        layers: [
            {
                image: "sky.jpg",
                speed: 0.1,
                zIndex: -3
            },
            {
                image: "clouds.png", 
                speed: 0.3,
                zIndex: -2
            },
            {
                image: "sakura.png",
                speed: 0.5,
                zIndex: -1
            }
        ];
        parallaxType: "scroll"; // scroll, mouse, both
    }
}
```

## ⚡ CJMOD扩展详解

### 1. printMylove - ASCII艺术生成器

将图片转换为ASCII艺术的强大工具。

```chtl
[Import] @CJmod from Chtholly;

script {
    // 基础用法
    const asciiArt = printMylove({
        url: "chtholly.jpg",      // 图片路径
        mode: "ASCII",            // ASCII, UNICODE, EMOJI
        width: 80,                // 输出宽度
        height: 40,               // 输出高度
        scale: 1.0,               // 缩放比例
        contrast: 1.2,            // 对比度
        brightness: 0.8           // 亮度
    });
    
    console.log(asciiArt);
    
    // 高级配置
    const customArt = printMylove({
        url: "portrait.png",
        mode: "CUSTOM",
        charSet: " .:-=+*#%@",    // 自定义字符集
        colorMode: "GRAYSCALE",   // GRAYSCALE, RGB, ANSI
        dithering: true,          // 启用抖动
        edgeDetection: true,      // 边缘检测
        invertColors: false       // 颜色反转
    });
    
    // 输出到HTML元素
    document.getElementById("ascii-output").innerHTML = 
        `<pre>${customArt}</pre>`;
}
```

**支持的模式：**
- `ASCII` - 标准ASCII字符
- `UNICODE` - Unicode字符集
- `EMOJI` - 表情符号
- `CUSTOM` - 自定义字符集

### 2. iNeverAway - 高级事件系统

强大的事件管理和回调系统。

```chtl
[Import] @CJmod from Chtholly;

script {
    // 创建事件系统
    vir EventManager = iNeverAway({
        // 初始化函数
        Void<Init>: function() {
            console.log("珂朵莉的守护系统启动");
        },
        
        // 清理函数
        Void<Cleanup>: function() {
            console.log("系统安全关闭");
        },
        
        // 自定义事件处理
        Handle<UserAction>: function(action, data) {
            console.log(`用户执行了: ${action}`, data);
        },
        
        Handle<SystemEvent>: function(event) {
            console.log("系统事件:", event);
        },
        
        // 带返回值的处理器
        Process<DataValidation>: function(data) {
            return data && data.length > 0;
        }
    });
    
    // 初始化系统
    EventManager->Void<Init>();
    
    // 注册DOM事件
    EventManager->Handle("click", function(e) {
        console.log("点击位置:", e.clientX, e.clientY);
        
        // 触发自定义事件
        EventManager->Handle<UserAction>("click", {
            x: e.clientX,
            y: e.clientY,
            target: e.target.tagName
        });
    });
    
    // 键盘事件
    EventManager->Handle("keydown", function(e) {
        if (e.key === "Escape") {
            console.log("珂朵莉：要保护大家！");
        }
    });
    
    // 数据验证示例
    function validateInput(input) {
        const isValid = EventManager->Process<DataValidation>(input);
        console.log("输入验证结果:", isValid);
        return isValid;
    }
    
    // 页面卸载时清理
    window.addEventListener("beforeunload", function() {
        EventManager->Void<Cleanup>();
    });
}
```

**iNeverAway特性：**
- 支持泛型事件处理 `Handle<Type>`
- 支持返回值的处理器 `Process<Type>`
- 自动内存管理
- 链式调用支持
- 类型安全的事件分发

## 🎵 主题配置

### 预设主题

```chtl
// 天空主题（默认）
[Configuration] @ChthollyTheme {
    theme: "sky";
    primaryColor: "#87CEEB";
    secondaryColor: "#B0E0E6";
    accentColor: "#F0F8FF";
}

// 樱花主题
[Configuration] @ChthollyTheme {
    theme: "sakura";
    primaryColor: "#FFB6C1";
    secondaryColor: "#FFC0CB";
    accentColor: "#FFF0F5";
}

// 纯净主题
[Configuration] @ChthollyTheme {
    theme: "pure";
    primaryColor: "#FFFFFF";
    secondaryColor: "#F8F8FF";
    accentColor: "#F0F0F0";
}
```

### 自定义主题

```chtl
[Configuration] @ChthollyCustomTheme {
    name: "twilight";
    colors: {
        primary: "#6B73FF";
        secondary: "#9B59B6";
        accent: "#E8E8E8";
        background: "#1A1A2E";
        text: "#EAEAEA";
    };
    
    fonts: {
        heading: "Georgia, serif";
        body: "Helvetica, sans-serif";
        code: "Monaco, monospace";
    };
    
    spacing: {
        small: 8;
        medium: 16;
        large: 32;
    };
    
    animations: {
        duration: 300;
        easing: "ease-out";
        enableParticles: true;
    };
}
```

## 🌸 完整示例

以下是一个使用珂朵莉模块创建的完整页面示例：

```chtl
[Import] @Chtl from Chtholly;
[Import] @CJmod from Chtholly;

[Configuration] @ChthollyTheme {
    theme: "sakura";
    enableAnimations: true;
    enableParticles: true;
}

html {
    head {
        title { text { 珂朵莉的花园 } }
        meta { charset: "utf-8"; }
        
        // 应用核心样式
        ChthollyCore();
    }
    
    body {
        // 视差背景
        ChthollyParallaxBackground {
            layers: [
                { image: "sky.jpg", speed: 0.1 },
                { image: "sakura.png", speed: 0.3 }
            ];
        }
        
        // 樱花雨效果
        ChthollyStylizedSakuraRain {
            density: "medium";
            autoStart: true;
        }
        
        // 鼠标特效
        ChthollyMouseEffectSystem {
            effectType: "sparkle";
            color: "#FFB6C1";
        }
        
        // 右键菜单
        ChthollyContextMenuSystem {
            // 自动应用到整个页面
        }
        
        // 主要内容
        div {
            class: "main-container";
            
            style {
                max-width: 1200px;
                margin: 0 auto;
                padding: var(--chtholly-spacing-lg);
            }
            
            header {
                text-align: center;
                margin-bottom: var(--chtholly-spacing-lg);
                
                h1 {
                    text { 珂朵莉的花园 }
                    style {
                        color: var(--chtholly-primary);
                        font-size: 2.5em;
                        margin-bottom: 0.5em;
                    }
                }
                
                p {
                    text { 在这里，每一朵樱花都承载着回忆 }
                    style {
                        color: var(--chtholly-text);
                        font-size: 1.2em;
                    }
                }
            }
            
            main {
                div {
                    class: "content-grid";
                    
                    style {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: var(--chtholly-spacing-lg);
                    }
                    
                    section {
                        class: "gallery-section";
                        
                        h2 { text { 回忆画廊 } }
                        
                        ChthollyShutterGallery {
                            images: [
                                "memory1.jpg",
                                "memory2.jpg",
                                "memory3.jpg"
                            ];
                            autoPlay: true;
                            showThumbnails: true;
                        }
                    }
                    
                    section {
                        class: "notes-section";
                        
                        h2 { text { 珂朵莉的话 } }
                        
                        ChthollyWarmNote {
                            title: "致重要的人";
                            content: "即使忘记了自己的名字，也不会忘记保护大家的心情。";
                            mood: "determined";
                            showAvatar: true;
                        }
                        
                        ChthollyMemo {
                            content: "今天的苹果派特别好吃！";
                            color: "pink";
                            editable: true;
                        }
                    }
                }
                
                section {
                    class: "progress-section";
                    margin-top: var(--chtholly-spacing-lg);
                    
                    h2 { text { 心情指数 } }
                    
                    ChthollyProgressSystem {
                        // 完整的进度条演示系统
                    }
                }
                
                section {
                    class: "accordion-section";
                    margin-top: var(--chtholly-spacing-lg);
                    
                    h2 { text { 了解更多 } }
                    
                    ChthollyAccordion {
                        title: "关于珂朵莉";
                        content: "她是15号浮游大陆的最后妖精，拥有守护重要之人的坚强意志...";
                        theme: "sakura";
                    }
                    
                    ChthollyAccordion {
                        title: "技术特性";
                        content: "本模块采用混合CMOD+CJMOD架构，提供丰富的UI组件和强大的扩展功能...";
                        theme: "sky";
                    }
                }
            }
        }
        
        // JavaScript功能
        script {
            // 初始化ASCII艺术
            const portrait = printMylove({
                url: "chtholly_portrait.jpg",
                mode: "ASCII",
                width: 60,
                height: 30
            });
            
            console.log("珂朵莉的肖像:");
            console.log(portrait);
            
            // 设置事件系统
            vir ChthollyGuardian = iNeverAway({
                Void<Init>: function() {
                    console.log("🌸 珂朵莉守护系统激活");
                },
                
                Handle<PageInteraction>: function(action, data) {
                    console.log(`🌸 珂朵莉注意到: ${action}`, data);
                },
                
                Void<Cleanup>: function() {
                    console.log("🌸 珂朵莉: 大家都平安无事就好...");
                }
            });
            
            // 启动守护系统
            ChthollyGuardian->Void<Init>();
            
            // 监听用户交互
            document.addEventListener("click", function(e) {
                ChthollyGuardian->Handle<PageInteraction>("click", {
                    element: e.target.tagName,
                    position: { x: e.clientX, y: e.clientY }
                });
            });
            
            // 页面卸载时清理
            window.addEventListener("beforeunload", function() {
                ChthollyGuardian->Void<Cleanup>();
            });
        }
    }
}
```

## 🛠️ 开发和调试

### 启用调试模式

```chtl
[Configuration] @ChthollyDebug {
    enableLogging: true;
    logLevel: "verbose";    // minimal, normal, verbose
    showComponentBounds: true;
    enablePerformanceMonitor: true;
}
```

### 性能优化

```chtl
[Configuration] @ChthollyPerformance {
    lazyLoadImages: true;
    enableCaching: true;
    minimizeAnimations: false;
    preloadComponents: ["Core", "Accordion"];
}
```

## 📚 相关文档

- [CHTL语法文档](./CHTL语法文档更新版.md) - 完整语法说明
- [项目构建指南](./项目构建指南.md) - 如何构建和使用
- [CMOD开发指南](./CMOD模块开发指南.md) - 开发自定义组件
- [CJMOD开发指南](./CJMOD模块开发指南.md) - 开发C++扩展

## 💝 致谢

> "即使忘记了自己的名字，也不会忘记保护大家的心情。"  
> —— 珂朵莉·诺塔·瑟尼欧里斯

感谢您选择珂朵莉模块。愿这个模块能像珂朵莉一样，温柔地守护着您的项目，为用户带来美好的体验。

## 📄 许可证

本模块遵循MIT许可证，详见 [LICENSE](../LICENSE) 文件。