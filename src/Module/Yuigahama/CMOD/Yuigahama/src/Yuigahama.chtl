// ========================================
// ç”±æ¯”æ»¨ç»“è¡£CMODä¸»æ¨¡å— - ä¸¥æ ¼æŒ‰ç…§CHTLè¯­æ³•æ–‡æ¡£
// 7ä¸ªUIç»„ä»¶çš„å®Œæ•´å®žçŽ° - æ¸©æš–é˜³å…‰é£Žæ ¼
// ========================================

// ç”±æ¯”æ»¨ç»“è¡£ä¸»é¢˜è‰²å½©å˜é‡ç»„
[Custom] @Var YuigahamaColorPalette
{
    primaryColor: "#FFE4B5";     // é¹¿çš®è‰² - ç”±æ¯”æ»¨çš„æ¸©æš–
    secondaryColor: "#FFEFD5";   // çº¸ç™½è‰² - ç”±æ¯”æ»¨çš„çº¯çœŸ
    accentColor: "#FF7F50";      // çŠç‘šè‰² - ç”±æ¯”æ»¨çš„æ´»åŠ›
    backgroundColor: "#FFF8DC";   // çŽ‰ç±³ä¸è‰² - æ¸©æš–èƒŒæ™¯
    textColor: "#8B4513";        // é©¬éžæ£•è‰² - æ¸©æš–æ–‡å­—
    borderColor: "#DEB887";      // ç¡¬æœ¨è‰² - è‡ªç„¶è¾¹æ¡†
    shadowColor: "#F5DEB3";      // å°éº¦è‰² - æŸ”å’Œé˜´å½±
}

[Custom] @Var YuigahamaSpacing
{
    xs: "4px";
    sm: "8px";
    md: "16px";
    lg: "24px";
    xl: "32px";
    xxl: "48px";
}

[Custom] @Var YuigahamaFonts
{
    primaryFont: "'Hiragino Sans GB', 'Microsoft YaHei', sans-serif";
    headingFont: "'Georgia', 'Times New Roman', serif";
    codeFont: "'Consolas', 'Monaco', monospace";
}

// 1. éŸ³ä¹æ’­æ”¾å™¨ç»„ä»¶
[Custom] @Element YuigahamaMusicPlayer
{
    div
    {
        class: "yuigahama-music-player";
        
        style
        {
            .yuigahama-music-player
            {
                background: linear-gradient(135deg, YuigahamaColorPalette(primaryColor), YuigahamaColorPalette(secondaryColor));
                border-radius: 20px;
                padding: YuigahamaSpacing(lg);
                box-shadow: 0 8px 32px YuigahamaColorPalette(shadowColor);
                font-family: YuigahamaFonts(primaryFont);
                max-width: 400px;
                position: relative;
                overflow: hidden;
            }
            
            .music-cover
            {
                width: 120px;
                height: 120px;
                border-radius: 50%;
                margin: 0 auto YuigahamaSpacing(md);
                background: linear-gradient(45deg, YuigahamaColorPalette(accentColor), YuigahamaColorPalette(primaryColor));
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 3em;
                color: white;
                animation: musicRotate 10s linear infinite paused;
                box-shadow: 0 4px 16px YuigahamaColorPalette(shadowColor);
            }
            
            @keyframes musicRotate
            {
                from { transform: rotate(0deg); }
                to { transform: rotate(360deg); }
            }
            
            .music-cover.playing
            {
                animation-play-state: running;
            }
            
            .music-info
            {
                text-align: center;
                margin-bottom: YuigahamaSpacing(md);
            }
            
            .music-title
            {
                font-size: 1.3em;
                font-weight: 700;
                color: YuigahamaColorPalette(textColor);
                margin-bottom: YuigahamaSpacing(xs);
            }
            
            .music-artist
            {
                font-size: 1em;
                color: YuigahamaColorPalette(accentColor);
                opacity: 0.8;
            }
            
            .music-controls
            {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: YuigahamaSpacing(md);
            }
            
            .control-btn
            {
                width: 50px;
                height: 50px;
                border-radius: 50%;
                border: none;
                background: YuigahamaColorPalette(accentColor);
                color: white;
                font-size: 1.2em;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .control-btn:hover
            {
                transform: scale(1.1);
                box-shadow: 0 4px 12px YuigahamaColorPalette(accentColor);
            }
            
            .play-btn
            {
                width: 60px;
                height: 60px;
                font-size: 1.5em;
            }
        }
        
        script
        {
            let isPlaying = false;
            
            {{.yuigahama-music-player}}->listen({
                click: function(event) {
                    if (event.target.classList.contains('play-btn')) {
                        isPlaying = !isPlaying;
                        const cover = {{.music-cover}};
                        
                        if (isPlaying) {
                            cover.classList.add('playing');
                            event.target.textContent = 'â¸ï¸';
                            console.log('ðŸŽµ ç”±æ¯”æ»¨çš„éŸ³ä¹å¼€å§‹æ’­æ”¾');
                        } else {
                            cover.classList.remove('playing');
                            event.target.textContent = 'â–¶ï¸';
                            console.log('â¸ï¸ ç”±æ¯”æ»¨çš„éŸ³ä¹æš‚åœ');
                        }
                    }
                }
            });
        }
    }
    
    div
    {
        class: "music-cover";
        text { ðŸŽµ }
    }
    
    div
    {
        class: "music-info";
        
        div
        {
            class: "music-title";
            text { ç”±æ¯”æ»¨ç»“è¡£çš„æ¸©æš–æ—‹å¾‹ }
        }
        
        div
        {
            class: "music-artist";
            text { Yuigahama Yui }
        }
    }
    
    div
    {
        class: "music-controls";
        
        button
        {
            class: "control-btn";
            text { â®ï¸ }
        }
        
        button
        {
            class: "control-btn play-btn";
            text { â–¶ï¸ }
        }
        
        button
        {
            class: "control-btn";
            text { â­ï¸ }
        }
    }
}

// 2. æ‰‹é£Žç´ç»„ä»¶
[Custom] @Element YuigahamaAccordion
{
    div
    {
        class: "yuigahama-accordion";
        
        style
        {
            .yuigahama-accordion
            {
                background: YuigahamaColorPalette(backgroundColor);
                border-radius: 16px;
                overflow: hidden;
                box-shadow: 0 6px 20px YuigahamaColorPalette(shadowColor);
                font-family: YuigahamaFonts(primaryFont);
                border: 2px solid YuigahamaColorPalette(borderColor);
            }
            
            .accordion-header
            {
                background: linear-gradient(135deg, YuigahamaColorPalette(primaryColor), YuigahamaColorPalette(secondaryColor));
                padding: YuigahamaSpacing(lg);
                cursor: pointer;
                transition: all 0.3s ease;
                color: YuigahamaColorPalette(textColor);
                font-weight: 600;
            }
            
            .accordion-header:hover
            {
                background: linear-gradient(135deg, YuigahamaColorPalette(accentColor), YuigahamaColorPalette(primaryColor));
            }
            
            .accordion-content
            {
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.4s ease;
                background: YuigahamaColorPalette(backgroundColor);
            }
            
            .accordion-content.active
            {
                max-height: 300px;
            }
            
            .accordion-body
            {
                padding: YuigahamaSpacing(lg);
                color: YuigahamaColorPalette(textColor);
                line-height: 1.7;
            }
        }
        
        script
        {
            {{.yuigahama-accordion}}->listen({
                click: function(event) {
                    if (event.target.classList.contains('accordion-header')) {
                        const content = event.target.nextElementSibling;
                        const isActive = content.classList.contains('active');
                        
                        // å…³é—­æ‰€æœ‰å…¶ä»–é¡¹
                        {{.accordion-content}}.forEach(item => {
                            item.classList.remove('active');
                        });
                        
                        // åˆ‡æ¢å½“å‰é¡¹
                        if (!isActive) {
                            content.classList.add('active');
                        }
                        
                        console.log('ðŸŒ» ç”±æ¯”æ»¨æ‰‹é£Žç´å±•å¼€/æ”¶èµ·');
                    }
                }
            });
        }
    }
    
    div
    {
        class: "accordion-header";
        text { ç”±æ¯”æ»¨çš„æ¸©æš–å›žå¿† }
    }
    
    div
    {
        class: "accordion-content";
        
        div
        {
            class: "accordion-body";
            text { è¿™é‡Œæ˜¯ç”±æ¯”æ»¨ç»“è¡£æ¸©æš–é˜³å…‰èˆ¬çš„ç¾Žå¥½å›žå¿†... }
        }
    }
}

// 3. å››å¶çª—ç›¸å†Œç»„ä»¶
[Custom] @Element YuigahamaGallery
{
    div
    {
        class: "yuigahama-gallery";
        
        style
        {
            .yuigahama-gallery
            {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: YuigahamaSpacing(lg);
                padding: YuigahamaSpacing(xl);
                background: linear-gradient(45deg, YuigahamaColorPalette(backgroundColor), YuigahamaColorPalette(secondaryColor));
                border-radius: 20px;
            }
            
            .gallery-item
            {
                position: relative;
                overflow: hidden;
                border-radius: 16px;
                box-shadow: 0 8px 24px YuigahamaColorPalette(shadowColor);
                transition: transform 0.3s ease;
                background: white;
            }
            
            .gallery-item:hover
            {
                transform: translateY(-12px) scale(1.03);
            }
            
            .gallery-image
            {
                width: 100%;
                height: 220px;
                background: linear-gradient(135deg, YuigahamaColorPalette(primaryColor), YuigahamaColorPalette(accentColor));
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 3em;
                color: white;
                transition: transform 0.3s ease;
            }
            
            .gallery-item:hover .gallery-image
            {
                transform: scale(1.1);
            }
        }
        
        script
        {
            {{.yuigahama-gallery}}->listen({
                click: function(event) {
                    const item = event.target.closest('.gallery-item');
                    if (item) {
                        console.log('ðŸŒ» ç”±æ¯”æ»¨ç›¸å†Œå›¾ç‰‡ç‚¹å‡»');
                        
                        animate({
                            target: item,
                            duration: 300,
                            begin: { transform: 'scale(1)' },
                            end: { transform: 'scale(1.05)' }
                        });
                    }
                }
            });
        }
    }
    
    div
    {
        class: "gallery-item";
        
        div
        {
            class: "gallery-image";
            text { ðŸŒ» }
        }
    }
    
    div
    {
        class: "gallery-item";
        
        div
        {
            class: "gallery-image";
            text { ðŸŒž }
        }
    }
}

// 4. å¤‡å¿˜å½•ç»„ä»¶
[Custom] @Element YuigahamaMemo
{
    div
    {
        class: "yuigahama-memo";
        
        style
        {
            .yuigahama-memo
            {
                background: YuigahamaColorPalette(backgroundColor);
                border: 3px solid YuigahamaColorPalette(primaryColor);
                border-radius: 20px;
                padding: YuigahamaSpacing(xl);
                box-shadow: 0 10px 30px YuigahamaColorPalette(shadowColor);
                font-family: YuigahamaFonts(primaryFont);
            }
            
            .memo-header
            {
                color: YuigahamaColorPalette(accentColor);
                font-size: 1.3em;
                font-weight: 700;
                margin-bottom: YuigahamaSpacing(md);
            }
            
            .memo-content
            {
                color: YuigahamaColorPalette(textColor);
                line-height: 1.8;
                font-size: 1.1em;
            }
        }
        
        script
        {
            {{.yuigahama-memo}}->listen({
                mouseenter: function() {
                    animate({
                        target: this,
                        duration: 300,
                        begin: { transform: 'scale(1)' },
                        end: { transform: 'scale(1.02)' }
                    });
                },
                
                mouseleave: function() {
                    animate({
                        target: this,
                        duration: 300,
                        begin: { transform: 'scale(1.02)' },
                        end: { transform: 'scale(1)' }
                    });
                }
            });
        }
    }
    
    div
    {
        class: "memo-header";
        text { ðŸŒ» ç”±æ¯”æ»¨çš„æ¸©æš–å¤‡å¿˜å½• }
    }
    
    div
    {
        class: "memo-content";
        text { è®°å½•æ¯ä¸€ä¸ªé˜³å…‰èˆ¬çš„ç¾Žå¥½çž¬é—´ï¼Œå°±åƒç”±æ¯”æ»¨ç»“è¡£æ€»æ˜¯èƒ½å¤Ÿå¸¦ç»™èº«è¾¹çš„äººæ— å°½çš„æ¸©æš–å’Œå¿«ä¹... }
    }
}

// 5. æš–è‰²ç¬”è®°ç»„ä»¶
[Custom] @Element YuigahamaNote
{
    div
    {
        class: "yuigahama-note";
        
        style
        {
            .yuigahama-note
            {
                background: linear-gradient(135deg, YuigahamaColorPalette(backgroundColor), white);
                border-left: 8px solid YuigahamaColorPalette(accentColor);
                border-radius: 0 16px 16px 0;
                padding: YuigahamaSpacing(xl);
                box-shadow: 0 8px 24px YuigahamaColorPalette(shadowColor);
                font-family: YuigahamaFonts(primaryFont);
                position: relative;
            }
            
            .note-title
            {
                color: YuigahamaColorPalette(accentColor);
                font-size: 1.5em;
                font-weight: 700;
                margin-bottom: YuigahamaSpacing(md);
                font-family: YuigahamaFonts(headingFont);
            }
            
            .note-content
            {
                color: YuigahamaColorPalette(textColor);
                line-height: 1.8;
                font-size: 1.1em;
                text-indent: 2em;
            }
            
            .note-signature
            {
                margin-top: YuigahamaSpacing(lg);
                text-align: right;
                font-style: italic;
                color: YuigahamaColorPalette(accentColor);
            }
        }
        
        script
        {
            {{.yuigahama-note}}->listen({
                click: function() {
                    console.log('ðŸŒ» ç”±æ¯”æ»¨ç¬”è®°è¢«æ¸©æš–åœ°ç‚¹å‡»');
                }
            });
        }
    }
    
    div
    {
        class: "note-title";
        text { ç”±æ¯”æ»¨ç»“è¡£çš„æ¸©æš–æ—¥è®° }
    }
    
    div
    {
        class: "note-content";
        text { ä»Šå¤©åˆæ˜¯å……æ»¡é˜³å…‰çš„ä¸€å¤©ï¼å’Œå¤§å®¶ä¸€èµ·åº¦è¿‡çš„æ—¶å…‰æ€»æ˜¯é‚£ä¹ˆå¿«ä¹å’Œæ¸©æš–... }
    }
    
    div
    {
        class: "note-signature";
        text { â€”â€” æ°¸è¿œæ¸©æš–çš„ç”±æ¯”æ»¨ç»“è¡£ }
    }
}

// 6. æ¨±èŠ±é›¨ç»„ä»¶
[Custom] @Element YuigahamaSakura
{
    div
    {
        class: "yuigahama-sakura";
        
        style
        {
            .yuigahama-sakura
            {
                position: relative;
                width: 100%;
                height: 400px;
                background: linear-gradient(to bottom, YuigahamaColorPalette(backgroundColor), YuigahamaColorPalette(primaryColor));
                border-radius: 24px;
                overflow: hidden;
                box-shadow: inset 0 0 60px YuigahamaColorPalette(shadowColor);
            }
            
            .sakura-title
            {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                color: YuigahamaColorPalette(accentColor);
                font-size: 2.5em;
                font-weight: 700;
                text-align: center;
                text-shadow: 2px 2px 8px YuigahamaColorPalette(shadowColor);
                font-family: YuigahamaFonts(headingFont);
                z-index: 10;
            }
        }
        
        script
        {
            console.log('ðŸŒ¸ ç”±æ¯”æ»¨çš„æ¸©æš–æ¨±èŠ±é›¨å¼€å§‹é£˜è½');
        }
    }
    
    div
    {
        class: "sakura-title";
        text { ç”±æ¯”æ»¨çš„æ¸©æš–æ¨±èŠ±é›¨ }
    }
}

// 7. é¼ æ ‡ç‰¹æ•ˆç»„ä»¶
[Custom] @Element YuigahamaMouseEffect
{
    div
    {
        class: "yuigahama-mouse-effect";
        
        style
        {
            .yuigahama-mouse-effect
            {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 9999;
            }
            
            .mouse-sunlight
            {
                position: absolute;
                width: 8px;
                height: 8px;
                background: YuigahamaColorPalette(accentColor);
                border-radius: 50%;
                animation: sunlightSparkle 1.5s ease-out forwards;
                pointer-events: none;
                box-shadow: 0 0 12px YuigahamaColorPalette(accentColor);
            }
            
            @keyframes sunlightSparkle
            {
                0% {
                    transform: scale(0);
                    opacity: 1;
                }
                50% {
                    transform: scale(2);
                    opacity: 0.8;
                }
                100% {
                    transform: scale(0);
                    opacity: 0;
                }
            }
        }
        
        script
        {
            {{document}}->listen({
                mousemove: function(event) {
                    if (Math.random() > 0.9) { // 10%æ¦‚çŽ‡è§¦å‘ç‰¹æ•ˆ
                        const effect = document.createElement('div');
                        effect.className = 'mouse-sunlight';
                        
                        effect.style.left = event.clientX + 'px';
                        effect.style.top = event.clientY + 'px';
                        
                        {{.yuigahama-mouse-effect}}->appendChild(effect);
                        
                        setTimeout(() => {
                            if (effect.parentNode) {
                                effect.parentNode.removeChild(effect);
                            }
                        }, 1500);
                    }
                },
                
                click: function(event) {
                    console.log('ðŸŒ» ç”±æ¯”æ»¨æ¸©æš–é¼ æ ‡ç‰¹æ•ˆ');
                    
                    // ç‚¹å‡»æ—¶åˆ›å»ºæ¸©æš–çš„ç‰¹æ•ˆ
                    for (let i = 0; i < 4; i++) {
                        setTimeout(() => {
                            const effect = document.createElement('div');
                            effect.className = 'mouse-sunlight';
                            
                            const angle = (i * 90) * Math.PI / 180;
                            const distance = 30;
                            
                            effect.style.left = (event.clientX + Math.cos(angle) * distance) + 'px';
                            effect.style.top = (event.clientY + Math.sin(angle) * distance) + 'px';
                            
                            {{.yuigahama-mouse-effect}}->appendChild(effect);
                            
                            setTimeout(() => {
                                if (effect.parentNode) {
                                    effect.parentNode.removeChild(effect);
                                }
                            }, 1500);
                        }, i * 100);
                    }
                }
            });
            
            console.log('ðŸŒ» ç”±æ¯”æ»¨æ¸©æš–é¼ æ ‡ç‰¹æ•ˆå·²æ¿€æ´»');
        }
    }
}