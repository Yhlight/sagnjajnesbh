// ============================================================================
// CHTLè¯­æ³•å…¨é¢æµ‹è¯•æ–‡ä»¶
// ä¸¥æ ¼æ ¹æ®mainåˆ†æ”¯çš„å‡†ç¡®CHTLè¯­æ³•æ–‡æ¡£è¿›è¡Œå…¨é¢æµ‹è¯•
// ä¸ç§è‡ªæ‰©å±•ï¼Œä¸å‡ºç°è¯­æ³•åå·®
// ============================================================================

// ============================================================================
// 1. æ³¨é‡Šç³»ç»Ÿå…¨é¢æµ‹è¯•
// ============================================================================

// å•è¡Œæ³¨é‡Š - ä¸ä¼šè¢«ç”Ÿæˆå™¨è¯†åˆ«ï¼Œç”Ÿæˆçš„HTMLä¸ä¼šå¸¦æœ‰è¿™äº›æ³¨é‡Š
/* 
 * å¤šè¡Œæ³¨é‡Š - ä¸ä¼šè¢«ç”Ÿæˆå™¨è¯†åˆ«ï¼Œç”Ÿæˆçš„HTMLä¸ä¼šå¸¦æœ‰è¿™äº›æ³¨é‡Š
 * å¯ä»¥è·¨è¶Šå¤šè¡Œ
 * æ”¯æŒå¤æ‚å†…å®¹
 */
-- ç”Ÿæˆå™¨æ³¨é‡Š - ä¼šè¢«ç”Ÿæˆå™¨è¯†åˆ«çš„æ³¨é‡Šï¼Œä¿ç•™åœ¨HTMLä¸­

// ============================================================================
// 2. æ¨¡æ¿ç³»ç»Ÿå…¨é¢æµ‹è¯•
// ============================================================================

// 2.1 æ ·å¼ç»„æ¨¡æ¿
[Template] @Style DefaultText {
    color: "black";
    line-height: 1.6;
    font-family: "Arial, sans-serif";
    margin: 0;
    padding: 0;
}

[Template] @Style ButtonBase {
    background-color: "#3b82f6";
    color: "white";
    border: "none";
    padding: "12px 24px";
    border-radius: "6px";
    cursor: "pointer";
    transition: "all 0.3s ease";
}

[Template] @Style CardLayout {
    background: "white";
    border: "1px solid #e2e8f0";
    border-radius: "8px";
    padding: "20px";
    margin: "10px 0";
    box-shadow: "0 2px 4px rgba(0,0,0,0.1)";
}

// 2.2 å…ƒç´ æ¨¡æ¿
[Template] @Element Box {
    span {
        text {
            è¿™æ˜¯ä¸€ç»„div
        }
    }

    div {
        style {
            width: 200px;
            height: 200px;
            background-color: red;
        }
    }

    div {
        style {
            width: 200px;
            height: 200px;
            background-color: blue;
        }
    }
}

[Template] @Element Card {
    div {
        class: card-container;
        
        style {
            .card-container {
                background: white;
                border-radius: 8px;
                padding: 20px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                margin: 15px 0;
            }
        }
        
        div {
            class: card-header;
            
            style {
                .card-header {
                    border-bottom: 1px solid #e2e8f0;
                    padding-bottom: 15px;
                    margin-bottom: 15px;
                }
            }
            
            text { å¡ç‰‡æ ‡é¢˜ }
        }
        
        div {
            class: card-content;
            text { å¡ç‰‡å†…å®¹ }
        }
    }
}

// 2.3 å˜é‡ç»„æ¨¡æ¿
[Template] @Var ThemeColor {
    // æ— éœ€åƒCSSä¸€æ ·ä»¥--ä¸ºå‰ç¼€ï¼Œå› ä¸ºå˜é‡ç»„æœ¬è´¨ä¸Šä¸æ˜¯CSSå˜é‡ï¼Œè€Œæ˜¯å€¼çš„æ›¿æ¢
    tableColor: "rgb(255, 192, 203)";
    primaryColor: "#3b82f6";
    secondaryColor: "#64748b";
    accentColor: "#f59e0b";
    dangerColor: "#ef4444";
    successColor: "#10b981";
}

[Template] @Var Spacing {
    tiny: "4px";
    small: "8px";
    medium: "16px";
    large: "24px";
    xlarge: "32px";
    xxlarge: "48px";
}

// 2.4 æ¨¡æ¿ç»§æ‰¿æµ‹è¯•
// ç»„åˆå¼ç»§æ‰¿
[Template] @Style ThemeColorExtended {
    background-color: yellow;  // é‡å¤çš„å…ƒç´ ï¼Œæ ¹æ®ä¹¦å†™çš„é¡ºåºè¿›è¡Œå€¼çš„æ›¿æ¢
    @Style DefaultText;  // æ ·å¼ç»„æ¨¡æ¿ç»§æ‰¿ï¼Œè·å¾—DefaultTextæ‰€æœ‰çš„å±æ€§
}

// æ˜¾æ€§ç»§æ‰¿
[Template] @Style ExplicitInheritStyle {
    background-color: green;
    inherit @Style DefaultText;
}

[Template] @Style ChainedInheritance {
    border: "2px solid #3b82f6";
    inherit @Style ButtonBase;
}

// ============================================================================
// 3. è‡ªå®šä¹‰ç³»ç»Ÿå…¨é¢æµ‹è¯•
// ============================================================================

// 3.1 æ— å€¼æ ·å¼ç»„
[Custom] @Style FlexSet {
    display,
    justify-content,
    align-items;
}

[Custom] @Style GridSet {
    display,
    grid-template-columns,
    grid-gap,
    grid-auto-rows;
}

// 3.2 æ ·å¼ç»„ç‰¹ä¾‹åŒ– - åˆ é™¤å±æ€§
[Template] @Style CompleteButtonStyle {
    color: white;
    font-size: 16px;
    line-height: 1.6;
    border: 1px black solid;
    margin: 10px;
    padding: 15px;
    background: "#3b82f6";
    border-radius: "6px";
    cursor: "pointer";
}

[Custom] @Style MinimalButton {
    @Style CompleteButtonStyle {
        delete line-height, border, margin;  // åˆ é™¤å¤šä¸ªå±æ€§
    }
    background: "#10b981";
}

// 3.3 åˆ é™¤æ ·å¼ç»„ç»§æ‰¿
[Template] @Style BaseComponentStyle {
    padding: "20px";
    margin: "10px";
    border: "1px solid #ccc";
    background: "#f9fafb";
}

[Custom] @Style IndependentStyle {
    @Style BaseComponentStyle;
    color: "#1f2937";
}

// 3.4 è‡ªå®šä¹‰å…ƒç´ 
[Custom] @Element InteractiveCard {
    div {
        class: interactive-container;
        
        style {
            .interactive-container {
                background: "#f0f9ff";
                border: "2px solid #3b82f6";
                border-radius: "10px";
                padding: "20px";
                cursor: "pointer";
                transition: "all 0.3s ease";
            }
        }
    }

    div {
        class: content-area;
        
        style {
            .content-area {
                padding: "15px";
                background: "#dbeafe";
                border-radius: "6px";
                margin: "10px 0";
            }
        }
    }

    span {
        class: label-text;
        
        style {
            .label-text {
                font-weight: "bold";
                color: "#1d4ed8";
            }
        }
    }
}

// 3.5 è‡ªå®šä¹‰å˜é‡ç»„
[Custom] @Var AppConfiguration {
    primaryColor: "#2563eb";
    textColor: "#1f2937";
    backgroundColor: "#f9fafb";
    borderColor: "#d1d5db";
    successColor: "#059669";
    warningColor: "#d97706";
    errorColor: "#dc2626";
}

// ============================================================================
// 4. åŸå§‹åµŒå…¥ç³»ç»Ÿå…¨é¢æµ‹è¯•
// ============================================================================

// 4.1 åŸºç¡€åŸå§‹åµŒå…¥
[Origin] @Html {
    <div class="raw-html-content">
        <h3>åŸå§‹HTMLåµŒå…¥æµ‹è¯•</h3>
        <p>è¿™æ®µHTMLä»£ç ä¸ä¼šè¢«CHTLå¤„ç†ï¼Œç›´æ¥ç”Ÿæˆåˆ°è¾“å‡ºä¸­</p>
        <ul>
            <li>æ”¯æŒä»»æ„HTMLç»“æ„</li>
            <li>ä¿æŒåŸå§‹æ ¼å¼</li>
            <li>å…¼å®¹æ€§å¤„ç†æœºåˆ¶</li>
        </ul>
    </div>
}

[Origin] @Style {
    /* åŸå§‹CSSåµŒå…¥æµ‹è¯• */
    @keyframes fadeInUp {
        from { 
            opacity: 0; 
            transform: translateY(30px); 
        }
        to { 
            opacity: 1; 
            transform: translateY(0); 
        }
    }
    
    @keyframes slideInLeft {
        from { transform: translateX(-100%); }
        to { transform: translateX(0); }
    }
    
    .fade-in-up {
        animation: fadeInUp 0.6s ease-out;
    }
    
    .slide-in-left {
        animation: slideInLeft 0.4s ease-out;
    }
    
    @media (max-width: 768px) {
        .responsive-hide {
            display: none;
        }
    }
}

[Origin] @JavaScript {
    // åŸå§‹JavaScriptåµŒå…¥æµ‹è¯•
    function globalUtility() {
        console.log('åŸå§‹JavaScriptå‡½æ•°è¢«è°ƒç”¨');
        return {
            version: '1.0.0',
            author: 'CHTL Team'
        };
    }
    
    const globalConfig = {
        apiEndpoint: 'https://api.example.com',
        timeout: 5000,
        retries: 3,
        debug: true
    };
    
    // å·¥å…·å‡½æ•°
    function formatDate(date) {
        return new Intl.DateTimeFormat('zh-CN', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
        }).format(date);
    }
}

// 4.2 å¸¦ååŸå§‹åµŒå…¥
[Origin] @Html NavigationHeader {
    <header class="site-navigation">
        <nav class="main-nav">
            <div class="nav-brand">
                <h2>CHTLæµ‹è¯•ç«™ç‚¹</h2>
            </div>
            <ul class="nav-links">
                <li><a href="#basic">åŸºç¡€è¯­æ³•</a></li>
                <li><a href="#templates">æ¨¡æ¿ç³»ç»Ÿ</a></li>
                <li><a href="#custom">è‡ªå®šä¹‰ç³»ç»Ÿ</a></li>
                <li><a href="#chtljs">CHTL JS</a></li>
                <li><a href="#modules">æ¨¡å—ç³»ç»Ÿ</a></li>
            </ul>
        </nav>
    </header>
}

[Origin] @Style NavigationStyles {
    .site-navigation {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 15px 0;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .main-nav {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 20px;
    }
    
    .nav-brand h2 {
        color: white;
        margin: 0;
        font-size: 1.5rem;
    }
    
    .nav-links {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: 30px;
    }
    
    .nav-links a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s ease;
    }
    
    .nav-links a:hover {
        color: #fbbf24;
    }
}

[Origin] @JavaScript InteractionUtils {
    // äº¤äº’å·¥å…·å‡½æ•°
    function smoothScrollTo(elementId) {
        const element = document.getElementById(elementId);
        if (element) {
            element.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    }
    
    function showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.textContent = message;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.remove();
        }, 3000);
    }
    
    // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
        console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œäº¤äº’å·¥å…·å·²å°±ç»ª');
        globalUtility();
    });
}

// 4.3 è‡ªå®šä¹‰ç±»å‹ç³»ç»Ÿ
[Origin] @Vue TestVueComponent {
    <template>
        <div class="vue-test-component">
            <h3>{{ title }}</h3>
            <p>{{ description }}</p>
            <div class="counter-section">
                <p>è®¡æ•°å™¨: {{ count }}</p>
                <button @click="increment">å¢åŠ </button>
                <button @click="decrement">å‡å°‘</button>
                <button @click="reset">é‡ç½®</button>
            </div>
            <div class="list-section">
                <h4>é¡¹ç›®åˆ—è¡¨:</h4>
                <ul>
                    <li v-for="(item, index) in items" :key="index">
                        {{ item.name }} - {{ item.value }}
                    </li>
                </ul>
                <button @click="addItem">æ·»åŠ é¡¹ç›®</button>
            </div>
        </div>
    </template>
    
    <script>
    export default {
        name: 'TestVueComponent',
        props: {
            title: {
                type: String,
                default: 'Vueç»„ä»¶æµ‹è¯•'
            },
            description: {
                type: String,
                default: 'CHTLä¸­çš„Vueç»„ä»¶åµŒå…¥æµ‹è¯•'
            }
        },
        data() {
            return {
                count: 0,
                items: [
                    { name: 'é¡¹ç›®1', value: 100 },
                    { name: 'é¡¹ç›®2', value: 200 }
                ]
            };
        },
        methods: {
            increment() {
                this.count++;
            },
            decrement() {
                this.count--;
            },
            reset() {
                this.count = 0;
            },
            addItem() {
                const newItem = {
                    name: `é¡¹ç›®${this.items.length + 1}`,
                    value: Math.floor(Math.random() * 1000)
                };
                this.items.push(newItem);
            }
        }
    };
    </script>
    
    <style scoped>
    .vue-test-component {
        border: 2px solid #42b883;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        background: #f0f9ff;
    }
    
    .counter-section, .list-section {
        margin: 15px 0;
        padding: 15px;
        background: white;
        border-radius: 6px;
    }
    
    button {
        background: #42b883;
        color: white;
        border: none;
        padding: 8px 16px;
        margin: 5px;
        border-radius: 4px;
        cursor: pointer;
    }
    
    button:hover {
        background: #369870;
    }
    </style>
}

[Origin] @React TestReactComponent {
    import React, { useState, useEffect } from 'react';
    
    function TestReactComponent({ title = 'Reactç»„ä»¶æµ‹è¯•', description = 'CHTLä¸­çš„Reactç»„ä»¶åµŒå…¥æµ‹è¯•' }) {
        const [count, setCount] = useState(0);
        const [items, setItems] = useState([
            { id: 1, name: 'ä»»åŠ¡1', completed: false },
            { id: 2, name: 'ä»»åŠ¡2', completed: true }
        ]);
        const [newItemName, setNewItemName] = useState('');
        
        useEffect(() => {
            console.log('Reactç»„ä»¶å·²æŒ‚è½½');
        }, []);
        
        const addItem = () => {
            if (newItemName.trim()) {
                const newItem = {
                    id: Date.now(),
                    name: newItemName,
                    completed: false
                };
                setItems([...items, newItem]);
                setNewItemName('');
            }
        };
        
        const toggleItem = (id) => {
            setItems(items.map(item => 
                item.id === id ? { ...item, completed: !item.completed } : item
            ));
        };
        
        const removeItem = (id) => {
            setItems(items.filter(item => item.id !== id));
        };
        
        return (
            <div className="react-test-component">
                <h3>{title}</h3>
                <p>{description}</p>
                
                <div className="counter-section">
                    <p>è®¡æ•°å™¨: {count}</p>
                    <button onClick={() => setCount(count + 1)}>å¢åŠ </button>
                    <button onClick={() => setCount(count - 1)}>å‡å°‘</button>
                    <button onClick={() => setCount(0)}>é‡ç½®</button>
                </div>
                
                <div className="todo-section">
                    <h4>å¾…åŠäº‹é¡¹:</h4>
                    <div className="add-item">
                        <input 
                            type="text" 
                            value={newItemName}
                            onChange={(e) => setNewItemName(e.target.value)}
                            placeholder="è¾“å…¥æ–°ä»»åŠ¡"
                            onKeyPress={(e) => e.key === 'Enter' && addItem()}
                        />
                        <button onClick={addItem}>æ·»åŠ </button>
                    </div>
                    <ul className="todo-list">
                        {items.map(item => (
                            <li key={item.id} className={item.completed ? 'completed' : ''}>
                                <input 
                                    type="checkbox" 
                                    checked={item.completed}
                                    onChange={() => toggleItem(item.id)}
                                />
                                <span>{item.name}</span>
                                <button onClick={() => removeItem(item.id)}>åˆ é™¤</button>
                            </li>
                        ))}
                    </ul>
                </div>
            </div>
        );
    }
    
    export default TestReactComponent;
}

// ============================================================================
// 5. é…ç½®ç»„å…¨é¢æµ‹è¯•
// ============================================================================

[Configuration] {
    // ç´¢å¼•çš„èµ·å§‹è®¡æ•°
    INDEX_INITIAL_COUNT = 0;
    // æ˜¯å¦ç¦ç”¨Nameé…ç½®ç»„(å³æ˜¯å¦å…è®¸è‡ªå®šä¹‰å…³é”®å­—åç§°)
    DISABLE_NAME_GROUP = false;
    // æ˜¯å¦ç¦ç”¨è‡ªå®šä¹‰åŸå§‹åµŒå…¥ç±»å‹
    DISABLE_CUSTOM_ORIGIN_TYPE = false;
    
    // DEBUGæ¨¡å¼
    DEBUG_MODE = true;
    
    // Nameé…ç½®å—ï¼Œå­˜æ”¾å…³é”®å­—åç§°ç”¨
    [Name] {
        // ç»„é€‰é¡¹ï¼Œå³CUSTOM_STYLEå…·æœ‰å¤šä¸ªå€¼
        CUSTOM_STYLE = [@Style, @style, @CSS, @Css, @css];
        CUSTOM_ELEMENT = @Element;
        CUSTOM_VAR = @Var;
        TEMPLATE_STYLE = @Style;
        TEMPLATE_ELEMENT = @Element;
        TEMPLATE_VAR = @Var;
        ORIGIN_HTML = @Html;
        ORIGIN_STYLE = @Style;
        ORIGIN_JAVASCRIPT = @JavaScript;
        IMPORT_HTML = @Html;
        IMPORT_STYLE = @Style;
        IMPORT_JAVASCRIPT = @JavaScript;
        IMPORT_CHTL = @Chtl;
        IMPORT_CJMOD = @CJmod;
        KEYWORD_INHERIT = inherit;
        KEYWORD_DELETE = delete;
        KEYWORD_INSERT = insert;
        KEYWORD_AFTER = after;
        KEYWORD_BEFORE = before;
        KEYWORD_REPLACE = replace;
        KEYWORD_ATTOP = "at top";
        KEYWORD_ATBOTTOM = "at bottom";
        KEYWORD_FROM = from;
        KEYWORD_AS = as;
        KEYWORD_EXCEPT = except;
        KEYWORD_TEXT = text;
        KEYWORD_STYLE = style;  // å±€éƒ¨æ ·å¼å—
        KEYWORD_SCRIPT = script;  // å±€éƒ¨è„šæœ¬å—
        KEYWORD_CUSTOM = [Custom];
        KEYWORD_TEMPLATE = [Template];
        KEYWORD_ORIGIN = [Origin];
        KEYWORD_IMPORT = [Import];
        KEYWORD_NAMESPACE = [Namespace];
        
        // ç»„é€‰é¡¹çš„æ•°é‡é™åˆ¶ï¼Œé¿å…åœ¨å¤§å‹é¡¹ç›®ä¸­å¯¹æ€§èƒ½çš„è¿‡é«˜æ¶ˆè€—
        OPTION_COUNT = 3;
    }
    
    [OriginType] {  // å®šä¹‰Originå…·æœ‰ä»€ä¹ˆè‡ªå®šä¹‰ç±»å‹
        ORIGINTYPE_VUE = @Vue;
        ORIGINTYPE_REACT = @React;
        ORIGINTYPE_ANGULAR = @Angular;
        ORIGINTYPE_SVELTE = @Svelte;
        ORIGINTYPE_MARKDOWN = @Markdown;
    }
}

// ============================================================================
// 6. å¯¼å…¥ç³»ç»Ÿå…¨é¢æµ‹è¯•
// ============================================================================

// 6.1 åŸºç¡€å¯¼å…¥
[Import] @Html from header.html as HeaderTemplate
[Import] @Style from theme.css as ThemeStyle  
[Import] @JavaScript from utils.js as UtilityFunctions

// 6.2 CHTLå’ŒCJMODå¯¼å…¥
[Import] @Chtl from ModuleName
[Import] @CJmod from ExtensionName

// 6.3 ç‰¹å®šç±»å‹å¯¼å…¥
[Import] [Custom] @Element ButtonComponent from ui/button.chtl as UIButton
[Import] [Template] @Style BaseStyles from ui/styles.chtl
[Import] [Custom] @Var ThemeColors from config/theme.chtl as ConfigColors

// 6.4 å­æ¨¡å—å¯¼å…¥ï¼ˆä½¿ç”¨ç‚¹å·è¯­æ³•ï¼‰
[Import] @Chtl from Chtholly.Space
[Import] @Chtl from ModuleName.SubModule
[Import] @Chtl from Chtholly.Effects

// ============================================================================
// 7. å‘½åç©ºé—´ç³»ç»Ÿå…¨é¢æµ‹è¯•
// ============================================================================

[Namespace] UIComponents {
    [Namespace] Buttons {
        [Template] @Element PrimaryButton {
            button {
                class: primary-btn;
                
                style {
                    .primary-btn {
                        background: "#3b82f6";
                        color: "white";
                        border: "none";
                        padding: "12px 24px";
                        border-radius: "6px";
                        cursor: "pointer";
                    }
                }
                
                text { ä¸»è¦æŒ‰é’® }
            }
        }
        
        [Template] @Element SecondaryButton {
            button {
                class: secondary-btn;
                
                style {
                    .secondary-btn {
                        background: "#6b7280";
                        color: "white";
                        border: "none";
                        padding: "10px 20px";
                        border-radius: "4px";
                        cursor: "pointer";
                    }
                }
                
                text { æ¬¡è¦æŒ‰é’® }
            }
        }
    }
    
    [Namespace] Forms {
        [Template] @Element InputField {
            div {
                class: input-field;
                
                style {
                    .input-field {
                        margin: "15px 0";
                    }
                    
                    .input-field label {
                        display: "block";
                        margin-bottom: "5px";
                        font-weight: "500";
                        color: "#374151";
                    }
                    
                    .input-field input {
                        width: "100%";
                        padding: "10px";
                        border: "2px solid #d1d5db";
                        border-radius: "6px";
                        font-size: "16px";
                    }
                    
                    .input-field input:focus {
                        outline: "none";
                        border-color: "#3b82f6";
                        box-shadow: "0 0 0 3px rgba(59, 130, 246, 0.1)";
                    }
                }
                
                label {
                    text { è¾“å…¥å­—æ®µ }
                }
                
                input {
                    type: "text";
                    placeholder: "è¯·è¾“å…¥å†…å®¹";
                }
            }
        }
    }
}

// ç®€åŒ–å‘½åç©ºé—´è¯­æ³•æµ‹è¯•
[Namespace] SimpleSpace
[Namespace] SimpleRoom  // åµŒå¥—å‘½åç©ºé—´æ—¶ï¼Œå¦‚æœä»…ä»…æ˜¯åªæœ‰ä¸€å±‚å…³ç³»æˆ–åªæœ‰ä¸€å±‚å¹³çº§ï¼Œå¯ä»¥ä¸ç”¨å†™èŠ±æ‹¬å·

[Custom] @Element SimpleComponent {
    div {
        class: simple-component;
        
        style {
            .simple-component {
                background: "#ecfdf5";
                border: "1px solid #10b981";
                padding: "15px";
                border-radius: "6px";
            }
        }
        
        text { ç®€åŒ–å‘½åç©ºé—´ä¸­çš„ç»„ä»¶ }
    }
}

// ============================================================================
// 8. çº¦æŸç³»ç»Ÿå…¨é¢æµ‹è¯•
// ============================================================================

// ç²¾ç¡®çº¦æŸ
[Custom] @Element RestrictedContainer {
    div {
        class: restricted-area;
        
        // ç¦æ­¢ä½¿ç”¨spanå’Œç‰¹å®šè‡ªå®šä¹‰å…ƒç´ 
        except span, [Custom] @Element InteractiveCard;
        
        style {
            .restricted-area {
                background: "#fef2f2";
                border: "2px solid #ef4444";
                padding: "20px";
                border-radius: "8px";
                margin: "15px 0";
            }
        }
        
        h3 {
            text { å—çº¦æŸçš„å®¹å™¨ }
            color: "#dc2626";
        }
        
        // åªèƒ½ä½¿ç”¨å…è®¸çš„å…ƒç´ 
        p { text { è¿™é‡Œåªèƒ½ä½¿ç”¨åŸºç¡€HTMLå…ƒç´  } }
        div { 
            text { å…è®¸çš„divå…ƒç´  } 
            style {
                padding: "10px";
                background: "#fee2e2";
                border-radius: "4px";
            }
        }
    }
}

// ç±»å‹çº¦æŸ
[Template] @Element TypeRestrictedArea {
    section {
        class: type-restricted;
        
        except @Html;  // ç¦æ­¢HTMLå…ƒç´ 
        
        style {
            .type-restricted {
                background: "#fffbeb";
                border: "2px solid #f59e0b";
                padding: "20px";
                border-radius: "8px";
            }
        }
        
        article {
            except [Template] @Var; // ç¦æ­¢åœ¨articleå†…éƒ¨ä½¿ç”¨å˜é‡ç»„æ¨¡æ¿çš„å¯¹è±¡
            
            div {
                except [Custom];  // ç¦æ­¢å‡ºç°[Custom]ç±»å‹çš„å¯¹è±¡
                
                text { å¤šå±‚ç±»å‹çº¦æŸæµ‹è¯• }
            }
        }
    }
}

// å…¨å±€çº¦æŸ
[Namespace] RestrictedNamespace {
    except [Template];
    
    // åœ¨è¿™ä¸ªå‘½åç©ºé—´ä¸­ä¸èƒ½å®šä¹‰æ¨¡æ¿ï¼Œåªèƒ½å®šä¹‰è‡ªå®šä¹‰
    [Custom] @Element AllowedCustomElement {
        div {
            class: allowed-element;
            text { åœ¨çº¦æŸå‘½åç©ºé—´ä¸­å…è®¸çš„è‡ªå®šä¹‰å…ƒç´  }
        }
    }
}

// ============================================================================
// 9. ä¸»HTMLç»“æ„å’Œå®Œæ•´è¯­æ³•æµ‹è¯•
// ============================================================================

html {
    head {
        meta {
            charset: UTF-8;
        }
        
        meta {
            name: viewport;
            content: "width=device-width, initial-scale=1.0";
        }
        
        title { 
            text { CHTLè¯­æ³•å…¨é¢æµ‹è¯•é¡µé¢ } 
        }
        
        // å…¨å±€æ ·å¼
        style {
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
                line-height: 1.6;
                color: #374151;
                background: #f9fafb;
            }
            
            .main-container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 20px;
            }
            
            .section-spacing {
                margin: 40px 0;
            }
        }
    }
    
    body {
        // ä½¿ç”¨å¸¦ååŸå§‹åµŒå…¥
        [Origin] @Html NavigationHeader;
        
        div {
            class: main-container;
            
            // ================================================================
            // åŸºç¡€è¯­æ³•ç‰¹æ€§æµ‹è¯•
            // ================================================================
            
            section {
                id: basic;
                class: section-spacing;
                
                h1 {
                    text { åŸºç¡€è¯­æ³•æµ‹è¯• }
                    color: "#1f2937";
                    margin-bottom: "30px";
                    font-size: "2.5rem";
                }
                
                // æ–‡æœ¬èŠ‚ç‚¹æµ‹è¯•
                div {
                    class: text-node-demo;
                    
                    style {
                        .text-node-demo {
                            background: "white";
                            border: "1px solid #e5e7eb";
                            border-radius: "8px";
                            padding: "20px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { æ–‡æœ¬èŠ‚ç‚¹æµ‹è¯• }
                        color: "#3b82f6";
                    }
                    
                    p {
                        text {
                            "è¿™æ˜¯å¸¦åŒå¼•å·çš„æ–‡æœ¬"
                        }
                    }
                    
                    p {
                        text {
                            'è¿™æ˜¯å¸¦å•å¼•å·çš„æ–‡æœ¬'
                        }
                    }
                    
                    p {
                        text {
                            è¿™æ˜¯æ— ä¿®é¥°å­—é¢é‡æ–‡æœ¬
                        }
                    }
                }
                
                // CEå¯¹ç­‰å¼æµ‹è¯•
                div {
                    class: ce-equality-demo;
                    
                    style {
                        .ce-equality-demo {
                            background: "#f0f9ff";
                            border: "2px solid #3b82f6";
                            padding: "20px";
                            border-radius: "8px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { CEå¯¹ç­‰å¼æµ‹è¯• }
                        color: "#1d4ed8";
                    }
                    
                    div {
                        id: colon-test;      // ä½¿ç”¨å†’å·
                        class = equal-test;  // ä½¿ç”¨ç­‰å·ï¼Œå®Œå…¨ç­‰ä»·
                        data-demo: "ce-equality";
                        
                        style {
                            background: "#dbeafe";
                            padding: "15px";
                            border-radius: "6px";
                            margin: "10px 0";
                        }
                        
                        text { å†’å·å’Œç­‰å·å®Œå…¨ç­‰ä»·æ¼”ç¤º }
                    }
                }
                
                // å±æ€§ç³»ç»Ÿæµ‹è¯•
                div {
                    class: attributes-demo;
                    
                    style {
                        .attributes-demo {
                            background: "#ecfdf5";
                            border: "2px solid #10b981";
                            padding: "20px";
                            border-radius: "8px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { å±æ€§ç³»ç»Ÿæµ‹è¯• }
                        color: "#059669";
                    }
                    
                    div {
                        id: box;
                        class: welcome;
                        data-value: 123;
                        data-string: "æµ‹è¯•å­—ç¬¦ä¸²";
                        data-boolean: true;
                        aria-label: "å±æ€§æµ‹è¯•å…ƒç´ ";
                        role: "region";
                        tabindex: 0;
                        
                        style {
                            background: "#d1fae5";
                            padding: "15px";
                            border-radius: "6px";
                            border: "1px solid #10b981";
                        }
                        
                        text {
                            HelloWorld
                        }
                    }
                }
            }
            
            // ================================================================
            // æ ·å¼ç³»ç»Ÿæµ‹è¯•
            // ================================================================
            
            section {
                id: styles;
                class: section-spacing;
                
                h1 {
                    text { æ ·å¼ç³»ç»Ÿæµ‹è¯• }
                    color: "#7c3aed";
                    margin-bottom: "30px";
                    font-size: "2.5rem";
                }
                
                // å±€éƒ¨æ ·å¼å—æµ‹è¯•
                div {
                    class: local-style-demo;
                    
                    h3 {
                        text { å±€éƒ¨æ ·å¼å—æµ‹è¯• }
                        color: "#7c3aed";
                    }
                    
                    // å†…è”æ ·å¼æµ‹è¯•
                    div {
                        style {
                            width: 100px;
                            height: 200px;
                            background: "#faf5ff";
                            border: "2px solid #a855f7";
                            border-radius: "8px";
                            padding: "15px";
                            margin: "15px 0";
                        }
                        
                        text { å†…è”æ ·å¼æµ‹è¯• }
                    }
                    
                    // è‡ªåŠ¨åŒ–ç±»åæµ‹è¯•ï¼ˆæ¨èæ–¹å¼ï¼‰
                    div {
                        style {
                            .auto-class {  // è‡ªåŠ¨æ·»åŠ ç±»åauto-classç»™å…ƒç´ 
                                width: 300px;
                                height: 150px;
                                background: "#ddd6fe";
                                border-radius: "8px";
                                padding: "20px";
                                margin: "15px 0";
                            }
                            
                            &:hover {  // ä½¿ç”¨&ç®€åŒ–ä¼ªç±»çš„ä½¿ç”¨
                                background: "#c4b5fd";
                                transform: "translateY(-2px)";
                                transition: "all 0.3s ease";
                            }
                            
                            &::before {  // ä¼ªå…ƒç´ é€‰æ‹©å™¨
                                content: "ğŸ¯ ";
                            }
                            
                            &::after {
                                content: " âœ¨";
                            }
                        }
                        
                        text { è‡ªåŠ¨åŒ–ç±»åæµ‹è¯•ï¼ˆæ¨èæ–¹å¼ï¼‰ }
                    }
                    
                    // è‡ªåŠ¨åŒ–IDæµ‹è¯•
                    div {
                        style {
                            #auto-id {  // è‡ªåŠ¨æ·»åŠ ID
                                background: "#fef3c7";
                                padding: "20px";
                                border: "2px solid #f59e0b";
                                border-radius: "8px";
                                margin: "15px 0";
                            }
                        }
                        
                        text { è‡ªåŠ¨åŒ–IDæµ‹è¯• }
                    }
                    
                    // ä¸Šä¸‹æ–‡æ¨å¯¼æµ‹è¯•ï¼ˆä¸æ¨èæ–¹å¼ï¼‰
                    div {
                        class: explicit-context;
                        id: explicit-id;
                        
                        style {
                            .explicit-context {
                                background: "#fecaca";
                                padding: "15px";
                                border-radius: "6px";
                                margin: "15px 0";
                            }
                            
                            &:hover {  // &å°†ä¼šæ ¹æ®ä¸Šä¸‹æ–‡æ¥æ¨å¯¼æˆç±»å/idï¼ˆä¼˜å…ˆç±»åï¼‰
                                background: "#fca5a5";
                            }
                            
                            &::before {
                                content: "âš ï¸ ";
                            }
                        }
                        
                        text { ä¸Šä¸‹æ–‡æ¨å¯¼æµ‹è¯•ï¼ˆä¸æ¨èæ–¹å¼ï¼‰ }
                    }
                }
            }
            
            // ================================================================
            // æ¨¡æ¿ç³»ç»Ÿä½¿ç”¨æµ‹è¯•
            // ================================================================
            
            section {
                id: templates;
                class: section-spacing;
                
                h1 {
                    text { æ¨¡æ¿ç³»ç»Ÿæµ‹è¯• }
                    color: "#059669";
                    margin-bottom: "30px";
                    font-size: "2.5rem";
                }
                
                // æ ·å¼ç»„æ¨¡æ¿ä½¿ç”¨
                div {
                    class: template-demo;
                    
                    style {
                        .template-demo {
                            background: "white";
                            border: "1px solid #d1d5db";
                            border-radius: "8px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { æ ·å¼ç»„æ¨¡æ¿ä½¿ç”¨ }
                        color: "#059669";
                    }
                    
                    div {
                        style {
                            @Style DefaultText;  // ä½¿ç”¨æ ·å¼ç»„æ¨¡æ¿ï¼Œæ¨¡æ¿ä¸­æ‰€æœ‰çš„å±æ€§éƒ½ä¼šè¢«æ·»åŠ 
                            background: "#f0fdf4";
                            padding: "15px";
                            border-radius: "6px";
                        }
                        
                        text { ä½¿ç”¨DefaultTextæ ·å¼ç»„æ¨¡æ¿ }
                    }
                    
                    div {
                        style {
                            @Style ThemeColorExtended;  // ä½¿ç”¨ç»§æ‰¿çš„æ ·å¼ç»„
                            padding: "15px";
                            border-radius: "6px";
                            margin: "10px 0";
                        }
                        
                        text { ä½¿ç”¨ç»„åˆå¼ç»§æ‰¿çš„æ ·å¼ç»„ }
                    }
                    
                    div {
                        style {
                            @Style ExplicitInheritStyle;  // ä½¿ç”¨æ˜¾æ€§ç»§æ‰¿çš„æ ·å¼ç»„
                            padding: "15px";
                            border-radius: "6px";
                            margin: "10px 0";
                        }
                        
                        text { ä½¿ç”¨æ˜¾æ€§ç»§æ‰¿çš„æ ·å¼ç»„ }
                    }
                }
                
                // å…ƒç´ æ¨¡æ¿ä½¿ç”¨
                div {
                    class: element-template-demo;
                    
                    style {
                        .element-template-demo {
                            background: "white";
                            border: "1px solid #d1d5db";
                            border-radius: "8px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { å…ƒç´ æ¨¡æ¿ä½¿ç”¨ }
                        color: "#059669";
                    }
                    
                    @Element Box;  // ä½¿ç”¨å…ƒç´ æ¨¡æ¿
                    
                    @Element Card;  // ä½¿ç”¨å¡ç‰‡æ¨¡æ¿
                }
                
                // å˜é‡ç»„æ¨¡æ¿ä½¿ç”¨
                div {
                    class: variable-demo;
                    
                    style {
                        .variable-demo {
                            background: "white";
                            border: "1px solid #d1d5db";
                            border-radius: "8px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { å˜é‡ç»„æ¨¡æ¿ä½¿ç”¨ }
                        color: "#059669";
                    }
                    
                    div {
                        style {
                            color: ThemeColor(tableColor);  // ä½¿ç”¨æ¨¡æ¿å˜é‡ç»„ï¼Œæ— éœ€ä»¥@Varä¸ºå‰ç¼€
                            background-color: ThemeColor(primaryColor);
                            padding: Spacing(medium);
                            margin: Spacing(small) 0;
                            border-radius: "6px";
                        }
                        
                        text { ä½¿ç”¨ThemeColorå’ŒSpacingå˜é‡ç»„ }
                    }
                }
            }
            
            // ================================================================
            // è‡ªå®šä¹‰ç³»ç»Ÿä½¿ç”¨æµ‹è¯•
            // ================================================================
            
            section {
                id: custom;
                class: section-spacing;
                
                h1 {
                    text { è‡ªå®šä¹‰ç³»ç»Ÿæµ‹è¯• }
                    color: "#dc2626";
                    margin-bottom: "30px";
                    font-size: "2.5rem";
                }
                
                // æ— å€¼æ ·å¼ç»„ä½¿ç”¨
                div {
                    class: custom-demo;
                    
                    style {
                        .custom-demo {
                            background: "white";
                            border: "1px solid #d1d5db";
                            border-radius: "8px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { æ— å€¼æ ·å¼ç»„ä½¿ç”¨ }
                        color: "#dc2626";
                    }
                    
                    div {
                        style {
                            @Style FlexSet {
                                display: flex;
                                justify-content: center;
                                align-items: center;
                            }
                            
                            height: "100px";
                            background: "#fef2f2";
                            border: "1px solid #ef4444";
                            border-radius: "6px";
                            margin: "15px 0";
                        }
                        
                        text { ä½¿ç”¨FlexSetæ— å€¼æ ·å¼ç»„ }
                    }
                    
                    div {
                        style {
                            @Style GridSet {
                                display: grid;
                                grid-template-columns: "repeat(3, 1fr)";
                                grid-gap: "10px";
                                grid-auto-rows: "minmax(50px, auto)";
                            }
                            
                            background: "#fef2f2";
                            border: "1px solid #ef4444";
                            border-radius: "6px";
                            padding: "15px";
                            margin: "15px 0";
                        }
                        
                        div { 
                            style { background: "#fee2e2"; padding: "10px"; text-align: "center"; }
                            text { ç½‘æ ¼1 } 
                        }
                        div { 
                            style { background: "#fee2e2"; padding: "10px"; text-align: "center"; }
                            text { ç½‘æ ¼2 } 
                        }
                        div { 
                            style { background: "#fee2e2"; padding: "10px"; text-align: "center"; }
                            text { ç½‘æ ¼3 } 
                        }
                    }
                }
                
                // æ ·å¼ç»„ç‰¹ä¾‹åŒ–ä½¿ç”¨
                div {
                    class: specialization-demo;
                    
                    style {
                        .specialization-demo {
                            background: "white";
                            border: "1px solid #d1d5db";
                            border-radius: "8px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { æ ·å¼ç»„ç‰¹ä¾‹åŒ–æµ‹è¯• }
                        color: "#dc2626";
                    }
                    
                    div {
                        style {
                            @Style MinimalButton;  // ä½¿ç”¨åˆ é™¤äº†å±æ€§çš„æ ·å¼ç»„
                            margin: "10px 0";
                        }
                        
                        text { ä½¿ç”¨åˆ é™¤å±æ€§çš„æ ·å¼ç»„ }
                    }
                    
                    div {
                        style {
                            @Style MinimalButton {
                                delete background;  // åœ¨ä½¿ç”¨æ—¶åˆ é™¤å±æ€§
                            }
                            background: "#fbbf24";
                            margin: "10px 0";
                        }
                        
                        text { åœ¨ä½¿ç”¨æ—¶åˆ é™¤å±æ€§ }
                    }
                    
                    div {
                        style {
                            @Style IndependentStyle {
                                delete @Style BaseComponentStyle;  // åˆ é™¤æ ·å¼ç»„ç»§æ‰¿
                            }
                            background: "#a78bfa";
                            color: "white";
                            padding: "15px";
                            border-radius: "6px";
                            margin: "10px 0";
                        }
                        
                        text { åˆ é™¤æ ·å¼ç»„ç»§æ‰¿æµ‹è¯• }
                    }
                }
                
                // è‡ªå®šä¹‰å…ƒç´ ç‰¹ä¾‹åŒ–
                div {
                    class: element-custom-demo;
                    
                    style {
                        .element-custom-demo {
                            background: "white";
                            border: "1px solid #d1d5db";
                            border-radius: "8px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { è‡ªå®šä¹‰å…ƒç´ ç‰¹ä¾‹åŒ–æµ‹è¯• }
                        color: "#dc2626";
                    }
                    
                    @Element InteractiveCard {
                        span {
                            // ä¸ºspanæ·»åŠ æ ·å¼
                            style {
                                color: "#dc2626";
                                font-weight: "bold";
                                background: "#fee2e2";
                                padding: "5px 10px";
                                border-radius: "4px";
                            }
                        }

                        div[1] {  // ç´¢å¼•è®¿é—®ç¬¬äºŒä¸ªdiv
                            // ä¸ºç¬¬äºŒä¸ªdivæ·»åŠ æ ·å¼
                            style {
                                background: "#dbeafe";
                                border: "2px solid #3b82f6";
                                padding: "15px";
                                border-radius: "8px";
                            }
                        }
                    }
                    
                    // æ’å…¥å…ƒç´ æµ‹è¯•
                    @Element InteractiveCard {
                        // åœ¨ç¬¬ä¸€ä¸ªdivåé¢æ’å…¥å†…å®¹
                        insert after div[0] {
                            div {
                                style {
                                    background: "#dcfce7";
                                    padding: "15px";
                                    margin: "10px 0";
                                    border-radius: "6px";
                                    border: "1px solid #10b981";
                                }
                                
                                text { è¿™æ˜¯æ’å…¥çš„æ–°å…ƒç´  }
                            }
                            
                            button {
                                style {
                                    @Style ButtonBase;
                                    background: "#10b981";
                                }
                                
                                text { æ’å…¥çš„æŒ‰é’® }
                            }
                        }
                    }
                    
                    // åˆ é™¤å…ƒç´ æµ‹è¯•
                    @Element InteractiveCard {
                        delete span;     // åˆ é™¤spanå…ƒç´ 
                        delete div[1];   // åˆ é™¤ç¬¬äºŒä¸ªdivå…ƒç´ 
                    }
                }
                
                // å˜é‡ç»„ç‰¹ä¾‹åŒ–æµ‹è¯•
                div {
                    class: variable-specialization-demo;
                    
                    style {
                        .variable-specialization-demo {
                            background: "white";
                            border: "1px solid #d1d5db";
                            border-radius: "8px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { å˜é‡ç»„ç‰¹ä¾‹åŒ–æµ‹è¯• }
                        color: "#dc2626";
                    }
                    
                    div {
                        style {
                            color: AppConfiguration(textColor);
                            background: AppConfiguration(backgroundColor);
                            border: "1px solid" AppConfiguration(borderColor);
                            padding: "20px";
                            border-radius: "8px";
                            margin: "15px 0";
                        }
                        
                        text { å˜é‡ç»„ä½¿ç”¨æ¼”ç¤º }
                    }
                    
                    // æ­£ç¡®çš„å˜é‡ç»„ç‰¹ä¾‹åŒ–ä½¿ç”¨
                    div {
                        style {
                            color: AppConfiguration(textColor);
                        }
                        
                        text { å˜é‡ç»„ç‰¹ä¾‹åŒ–æ¼”ç¤º }
                    }
                }
            }
            
            // ================================================================
            // CHTL JSæ‰©å±•è¯­æ³•æµ‹è¯•
            // ================================================================
            
            section {
                id: chtljs;
                class: section-spacing;
                
                h1 {
                    text { CHTL JSæ‰©å±•è¯­æ³•æµ‹è¯• }
                    color: "#1d4ed8";
                    margin-bottom: "30px";
                    font-size: "2.5rem";
                }
                
                // å¢å¼ºé€‰æ‹©å™¨æµ‹è¯•
                div {
                    class: selector-test;
                    
                    style {
                        .selector-test {
                            background: "white";
                            border: "2px solid #3b82f6";
                            border-radius: "10px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                        
                        .test-button {
                            background: "#3b82f6";
                            color: "white";
                            border: "none";
                            padding: "10px 20px";
                            border-radius: "6px";
                            cursor: "pointer";
                            margin: "10px";
                        }
                        
                        .selector-demo {
                            background: "#f0f9ff";
                            padding: "15px";
                            border-radius: "6px";
                            margin: "10px 0";
                        }
                    }
                    
                    h3 {
                        text { å¢å¼ºé€‰æ‹©å™¨æµ‹è¯• }
                        color: "#1d4ed8";
                    }
                    
                    button {
                        class: test-button;
                        id: selector-test-btn;
                        
                        script {
                            // æµ‹è¯•å„ç§å¢å¼ºé€‰æ‹©å™¨
                            {{box}}.textContent;  // å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºtagï¼Œç„¶åæŸ¥æ‰¾ç±»å/id=box(idä¼˜å…ˆ)çš„å…ƒç´ 
                            {{.test-button}};     // æŸ¥æ‰¾ç±»åä¸ºtest-buttonçš„å…ƒç´ 
                            {{#selector-test-btn}};  // æŸ¥æ‰¾idä¸ºselector-test-btnçš„å…ƒç´ 
                            {{button}};           // æ‰€æœ‰çš„buttonå…ƒç´ 
                            {{.selector-test button}};  // æŸ¥æ‰¾ç±»åä¸ºselector-testçš„å…ƒç´ çš„æ‰€æœ‰buttonåä»£
                            
                            // ç²¾ç¡®è®¿é—®
                            {{button[0]}};  // ç¬¬ä¸€ä¸ªbuttonå…ƒç´ 
                            
                            // æ˜ç¡®ä½¿ç”¨CHTL JSè¯­æ³•ï¼ˆæ¨èä½¿ç”¨->ä»£æ›¿.ï¼‰
                            {{&}}->textContent = "å¢å¼ºé€‰æ‹©å™¨æµ‹è¯•";
                        }
                        
                        text { å¢å¼ºé€‰æ‹©å™¨æµ‹è¯• }
                    }
                    
                    div {
                        class: selector-demo;
                        text { é€‰æ‹©å™¨æµ‹è¯•æ¼”ç¤ºåŒºåŸŸ }
                    }
                }
                
                // å¢å¼ºç›‘å¬å™¨æµ‹è¯•
                div {
                    class: listener-test;
                    
                    style {
                        .listener-test {
                            background: "white";
                            border: "2px solid #10b981";
                            border-radius: "10px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { å¢å¼ºç›‘å¬å™¨æµ‹è¯• }
                        color: "#059669";
                    }
                    
                    button {
                        class: test-button;
                        id: listener-demo-btn;
                        
                        script {
                            {{#listener-demo-btn}}->listen({
                                click: () => {
                                    console.log('æŒ‰é’®è¢«ç‚¹å‡»');
                                    {{&}}->style->background = '#059669';
                                },

                                mouseenter: function() {
                                    {{&}}->style->transform = 'scale(1.05)';
                                    {{&}}->style->boxShadow = '0 4px 8px rgba(16, 185, 129, 0.3)';
                                },

                                mouseleave: function() {
                                    {{&}}->style->transform = 'scale(1)';
                                    {{&}}->style->boxShadow = 'none';
                                },
                                
                                focus: function() {
                                    {{&}}->style->outline = '2px solid #10b981';
                                },
                                
                                blur: function() {
                                    {{&}}->style->outline = 'none';
                                }
                            });
                        }
                        
                        text { å¢å¼ºç›‘å¬å™¨æµ‹è¯• }
                    }
                }
                
                // äº‹ä»¶å§”æ‰˜æµ‹è¯•
                div {
                    class: delegation-test;
                    
                    style {
                        .delegation-test {
                            background: "white";
                            border: "2px solid #f59e0b";
                            border-radius: "10px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                        
                        .delegation-container {
                            border: "2px dashed #f59e0b";
                            padding: "20px";
                            border-radius: "8px";
                            margin: "15px 0";
                        }
                        
                        .delegated-item {
                            background: "#fef3c7";
                            border: "1px solid #f59e0b";
                            padding: "10px";
                            margin: "8px";
                            border-radius: "4px";
                            cursor: "pointer";
                            display: "inline-block";
                            min-width: "100px";
                            text-align: "center";
                        }
                    }
                    
                    h3 {
                        text { äº‹ä»¶å§”æ‰˜æµ‹è¯• }
                        color: "#d97706";
                    }
                    
                    div {
                        class: delegation-container;
                        
                        script {
                            {{&}}->delegate({
                                target: {{.delegated-item}},
                                click: function() {
                                    console.log('å§”æ‰˜ç‚¹å‡»äº‹ä»¶è§¦å‘');
                                    {{this}}->style->background = '#fbbf24';
                                    {{this}}->style->transform = 'scale(1.1)';
                                    
                                    setTimeout(() => {
                                        {{this}}->style->background = '#fef3c7';
                                        {{this}}->style->transform = 'scale(1)';
                                    }, 300);
                                },
                                
                                mouseenter: function() {
                                    {{this}}->style->transform = 'translateY(-2px)';
                                    {{this}}->style->boxShadow = '0 4px 8px rgba(245, 158, 11, 0.3)';
                                },
                                
                                mouseleave: function() {
                                    {{this}}->style->transform = 'translateY(0)';
                                    {{this}}->style->boxShadow = 'none';
                                }
                            });
                        }
                        
                        p {
                            text { ç‚¹å‡»ä¸‹é¢çš„å§”æ‰˜é¡¹ç›®æµ‹è¯•äº‹ä»¶å§”æ‰˜åŠŸèƒ½ï¼š }
                            margin-bottom: "15px";
                        }
                        
                        div {
                            class: delegated-item;
                            text { å§”æ‰˜é¡¹ç›® 1 }
                        }
                        
                        div {
                            class: delegated-item;
                            text { å§”æ‰˜é¡¹ç›® 2 }
                        }
                        
                        div {
                            class: delegated-item;
                            text { å§”æ‰˜é¡¹ç›® 3 }
                        }
                        
                        div {
                            class: delegated-item;
                            text { å§”æ‰˜é¡¹ç›® 4 }
                        }
                    }
                }
                
                // åŠ¨ç”»ç³»ç»Ÿæµ‹è¯•
                div {
                    class: animation-test;
                    
                    style {
                        .animation-test {
                            background: "white";
                            border: "2px solid #8b5cf6";
                            border-radius: "10px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                        
                        .animation-target {
                            width: "120px";
                            height: "120px";
                            background: "#8b5cf6";
                            border-radius: "50%";
                            margin: "20px auto";
                            display: "flex";
                            align-items: "center";
                            justify-content: "center";
                            color: "white";
                            font-weight: "bold";
                            cursor: "pointer";
                        }
                    }
                    
                    h3 {
                        text { åŠ¨ç”»ç³»ç»Ÿæµ‹è¯• }
                        color: "#7c3aed";
                    }
                    
                    div {
                        class: animation-target;
                        text { ç‚¹å‡»æˆ‘ }
                    }
                    
                    button {
                        class: test-button;
                        
                        script {
                            {{&}}->listen({
                                click: function() {
                                    const anim = animate({
                                        target: {{.animation-target}},
                                        duration: 1500,  // åŠ¨ç”»æŒç»­æ—¶é—´ï¼Œms
                                        easing: "cubic-bezier(0.68, -0.55, 0.265, 1.55)",  // ç¼“åŠ¨å‡½æ•°
                                        
                                        begin: {  // èµ·å§‹çŠ¶æ€ï¼Œå†™cssä»£ç 
                                            opacity: 1,
                                            transform: 'scale(1) rotate(0deg)',
                                            background: '#8b5cf6'
                                        },
                                        
                                        when: [
                                            {
                                                at: 0.3,  // åŠ¨ç”»æ’­æ”¾åˆ°30%æ—¶åˆ»
                                                opacity: 0.7,
                                                transform: 'scale(1.3) rotate(120deg)',
                                                background: '#10b981'
                                            },
                                            {
                                                at: 0.6,  // åŠ¨ç”»æ’­æ”¾åˆ°60%æ—¶åˆ»
                                                opacity: 0.9,
                                                transform: 'scale(0.8) rotate(240deg)',
                                                background: '#f59e0b'
                                            },
                                            {
                                                at: 0.8,  // åŠ¨ç”»æ’­æ”¾åˆ°80%æ—¶åˆ»
                                                opacity: 0.5,
                                                transform: 'scale(1.1) rotate(300deg)',
                                                background: '#ef4444'
                                            }
                                        ],
                                        
                                        end: {  // ç»ˆæ­¢çŠ¶æ€ï¼Œå†™cssä»£ç 
                                            opacity: 1,
                                            transform: 'scale(1) rotate(360deg)',
                                            background: '#8b5cf6'
                                        },
                                        
                                        loop: 1,  // å¾ªç¯æ¬¡æ•°
                                        delay: 0,  // å¼€å§‹æ’­æ”¾çš„å»¶è¿Ÿï¼Œms
                                        callback: function() {  // æ’­æ”¾å®Œæ¯•ååšä»€ä¹ˆ
                                            console.log('å¤æ‚åŠ¨ç”»æ’­æ”¾å®Œæˆ');
                                            {{.animation-target}}->textContent = 'å®Œæˆï¼';
                                            setTimeout(() => {
                                                {{.animation-target}}->textContent = 'ç‚¹å‡»æˆ‘';
                                            }, 1000);
                                        }
                                    });
                                }
                            });
                        }
                        
                        text { å¯åŠ¨å¤æ‚åŠ¨ç”» }
                    }
                }
                
                // è™šå¯¹è±¡æµ‹è¯•
                div {
                    class: virtual-object-test;
                    
                    style {
                        .virtual-object-test {
                            background: "white";
                            border: "2px solid #10b981";
                            border-radius: "10px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                        
                        .status-display {
                            background: "#1f2937";
                            color: "#f9fafb";
                            padding: "15px";
                            border-radius: "6px";
                            font-family: "'Courier New', monospace";
                            margin: "15px 0";
                            min-height: "80px";
                        }
                    }
                    
                    h3 {
                        text { è™šå¯¹è±¡æµ‹è¯• }
                        color: "#059669";
                    }
                    
                    p {
                        text { è™šå¯¹è±¡æ˜¯ç¼–è¯‘æœŸé—´çš„è¯­æ³•ç³–ï¼Œä¸æ¶‰åŠJSè¿è¡Œæ—¶å¯¹è±¡ }
                        margin-bottom: "15px";
                    }
                    
                    script {
                        vir SystemManager = listen({
                            state: {
                                initialized: false,
                                operationCount: 0,
                                lastOperation: null
                            },
                            
                            initialize: function() {
                                this.state.initialized = true;
                                this.state.operationCount = 0;
                                this.state.lastOperation = 'initialize';
                                
                                console.log('ç³»ç»Ÿç®¡ç†å™¨åˆå§‹åŒ–');
                                {{.status-display}}->textContent = 'SystemManager initialized\nOperation count: 0\nLast operation: initialize';
                                {{.virtual-object-test}}->style->borderColor = '#3b82f6';
                            },
                            
                            performOperation: function(operationType) {
                                if (!this.state.initialized) {
                                    console.error('ç³»ç»Ÿæœªåˆå§‹åŒ–');
                                    return;
                                }
                                
                                this.state.operationCount++;
                                this.state.lastOperation = operationType;
                                
                                const status = `SystemManager status:
Initialized: ${this.state.initialized}
Operation count: ${this.state.operationCount}
Last operation: ${operationType}
Timestamp: ${new Date().toLocaleTimeString()}`;
                                
                                {{.status-display}}->textContent = status;
                                console.log(`æ‰§è¡Œæ“ä½œ: ${operationType}`);
                            },
                            
                            reset: function() {
                                this.state.operationCount = 0;
                                this.state.lastOperation = 'reset';
                                
                                {{.status-display}}->textContent = 'SystemManager reset\nOperation count: 0\nLast operation: reset';
                                {{.virtual-object-test}}->style->borderColor = '#10b981';
                                console.log('ç³»ç»Ÿç®¡ç†å™¨é‡ç½®');
                            },
                            
                            shutdown: function() {
                                this.state.initialized = false;
                                this.state.lastOperation = 'shutdown';
                                
                                {{.status-display}}->textContent = 'SystemManager shutdown\nSystem offline';
                                {{.virtual-object-test}}->style->borderColor = '#6b7280';
                                console.log('ç³»ç»Ÿç®¡ç†å™¨å…³é—­');
                            }
                        });
                        
                        // åˆå§‹åŒ–è™šå¯¹è±¡
                        SystemManager->initialize();
                    }
                    
                    div {
                        class: status-display;
                        text { ç³»ç»ŸçŠ¶æ€å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ... }
                    }
                    
                    div {
                        class: virtual-controls;
                        
                        style {
                            .virtual-controls {
                                display: "flex";
                                gap: "10px";
                                margin: "20px 0";
                                flex-wrap: "wrap";
                            }
                        }
                        
                        button {
                            class: test-button;
                            
                            script {
                                {{&}}->listen({
                                    click: function() {
                                        SystemManager->performOperation('data_processing');
                                    }
                                });
                            }
                            
                            text { æ•°æ®å¤„ç† }
                        }
                        
                        button {
                            class: test-button;
                            
                            script {
                                {{&}}->listen({
                                    click: function() {
                                        SystemManager->performOperation('file_upload');
                                    }
                                });
                            }
                            
                            text { æ–‡ä»¶ä¸Šä¼  }
                        }
                        
                        button {
                            class: test-button;
                            
                            script {
                                {{&}}->listen({
                                    click: function() {
                                        SystemManager->reset();
                                    }
                                });
                            }
                            
                            text { é‡ç½®ç³»ç»Ÿ }
                        }
                        
                        button {
                            class: test-button;
                            
                            script {
                                {{&}}->listen({
                                    click: function() {
                                        SystemManager->shutdown();
                                    }
                                });
                            }
                            
                            text { å…³é—­ç³»ç»Ÿ }
                        }
                    }
                }
            }
            
            // ================================================================
            // çº¦æŸç³»ç»Ÿæµ‹è¯•
            // ================================================================
            
            section {
                id: constraints;
                class: section-spacing;
                
                h1 {
                    text { çº¦æŸç³»ç»Ÿæµ‹è¯• }
                    color: "#ef4444";
                    margin-bottom: "30px";
                    font-size: "2.5rem";
                }
                
                // ç²¾ç¡®çº¦æŸæµ‹è¯•
                div {
                    class: constraint-demo;
                    
                    style {
                        .constraint-demo {
                            background: "white";
                            border: "2px solid #ef4444";
                            border-radius: "10px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { ç²¾ç¡®çº¦æŸæµ‹è¯• }
                        color: "#dc2626";
                    }
                    
                    @Element RestrictedContainer;
                }
                
                // ç±»å‹çº¦æŸæµ‹è¯•
                div {
                    class: type-constraint-demo;
                    
                    style {
                        .type-constraint-demo {
                            background: "white";
                            border: "2px solid #f59e0b";
                            border-radius: "10px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { ç±»å‹çº¦æŸæµ‹è¯• }
                        color: "#d97706";
                    }
                    
                    @Element TypeRestrictedArea;
                }
            }
            
            // ================================================================
            // åŸå§‹åµŒå…¥ä½¿ç”¨æµ‹è¯•
            // ================================================================
            
            section {
                id: origins;
                class: section-spacing;
                
                h1 {
                    text { åŸå§‹åµŒå…¥ä½¿ç”¨æµ‹è¯• }
                    color: "#6b7280";
                    margin-bottom: "30px";
                    font-size: "2.5rem";
                }
                
                div {
                    class: origin-demo;
                    
                    style {
                        .origin-demo {
                            background: "white";
                            border: "2px solid #6b7280";
                            border-radius: "10px";
                            padding: "25px";
                            margin: "20px 0";
                        }
                    }
                    
                    h3 {
                        text { åŸå§‹åµŒå…¥æ¼”ç¤º }
                        color: "#4b5563";
                    }
                    
                    // ä½¿ç”¨åŸºç¡€åŸå§‹åµŒå…¥
                    [Origin] @Html;
                    
                    // ä½¿ç”¨å¸¦ååŸå§‹åµŒå…¥
                    [Origin] @Html NavigationHeader;
                    
                    p {
                        text { åŸå§‹åµŒå…¥çš„HTMLã€CSSã€JavaScriptå·²è¢«åŠ è½½å’Œæ‰§è¡Œ }
                        margin: "15px 0";
                    }
                }
            }
            
            footer {
                style {
                    background: "linear-gradient(135deg, #1f2937 0%, #374151 100%)";
                    color: "#f9fafb";
                    text-align: "center";
                    padding: "50px 20px";
                    margin-top: "60px";
                    border-radius: "12px";
                }
                
                div {
                    style {
                        max-width: "800px";
                        margin: "0 auto";
                    }
                    
                    h2 {
                        text { CHTLè¯­æ³•å…¨é¢æµ‹è¯•å®Œæˆ }
                        margin-bottom: "20px";
                        color: "#60a5fa";
                        font-size: "2rem";
                    }
                    
                    p {
                        text { åŸºäºmainåˆ†æ”¯å‡†ç¡®è¯­æ³•æ–‡æ¡£çš„å®Œæ•´æµ‹è¯• }
                        opacity: 0.9;
                        margin-bottom: "15px";
                        font-size: "1.2rem";
                    }
                    
                    p {
                        text { æ¶µç›–ï¼šåŸºç¡€è¯­æ³•ã€æ ·å¼ç³»ç»Ÿã€æ¨¡æ¿ç³»ç»Ÿã€è‡ªå®šä¹‰ç³»ç»Ÿã€åŸå§‹åµŒå…¥ã€é…ç½®ç»„ã€å¯¼å…¥ç³»ç»Ÿã€å‘½åç©ºé—´ã€çº¦æŸç³»ç»Ÿã€CHTL JSæ‰©å±• }
                        opacity: 0.7;
                        font-size: "1rem";
                        margin: 0;
                    }
                }
            }
        }
    }
}