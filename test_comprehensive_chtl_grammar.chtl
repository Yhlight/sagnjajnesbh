// ============================================================================
// CHTLè¯­æ³•å…¨é¢æµ‹è¯•æ–‡ä»¶
// ä¸¥æ ¼æ ¹æ®CHTLè¯­æ³•æ–‡æ¡£è¿›è¡Œå…¨é¢æµ‹è¯•
// ============================================================================

// ============================================================================
// 1. åŸºç¡€è¯­æ³•æµ‹è¯•
// ============================================================================

// 1.1 æ³¨é‡Šç³»ç»Ÿæµ‹è¯•
// å•è¡Œæ³¨é‡Š - ä¸ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„HTMLä¸­
/* 
 * å¤šè¡Œæ³¨é‡Š - ä¸ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„HTMLä¸­
 * æ”¯æŒå¤šè¡Œå†…å®¹
 */
-- ç”Ÿæˆå™¨æ³¨é‡Š - ä¼šè¢«ä¿ç•™åœ¨ç”Ÿæˆçš„HTMLä¸­

// ============================================================================
// 2. æ¨¡æ¿ç³»ç»Ÿæµ‹è¯•
// ============================================================================

// 2.1 æ ·å¼ç»„æ¨¡æ¿æµ‹è¯•
[Template] @Style ButtonBase {
    padding: 12px 24px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s ease;
}

[Template] @Style ButtonPrimary {
    background: #3b82f6;
    color: white;
}

[Template] @Style ButtonSecondary {
    background: #64748b;
    color: white;
}

// 2.2 å…ƒç´ æ¨¡æ¿æµ‹è¯•
[Template] @Element Card {
    div {
        class: card;
        
        style {
            .card {
                background: white;
                border-radius: 8px;
                padding: 20px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
        }
        
        div {
            class: card-header;
            text { å¡ç‰‡æ ‡é¢˜ }
        }
        
        div {
            class: card-content;
            text { å¡ç‰‡å†…å®¹ }
        }
    }
}

// 2.3 å˜é‡ç»„æ¨¡æ¿æµ‹è¯•
[Template] @Var ThemeColors {
    primaryColor: "#3b82f6";
    secondaryColor: "#64748b";
    accentColor: "#f59e0b";
    dangerColor: "#ef4444";
    successColor: "#10b981";
}

[Template] @Var Spacing {
    small: "8px";
    medium: "16px";
    large: "24px";
    xlarge: "32px";
}

// 2.4 æ ·å¼ç»„ç»§æ‰¿æµ‹è¯•
[Template] @Style ExtendedButton {
    inherit @Style ButtonBase;
    background: #10b981;
    font-weight: bold;
}

// ============================================================================
// 3. è‡ªå®šä¹‰ç³»ç»Ÿæµ‹è¯•
// ============================================================================

// 3.1 è‡ªå®šä¹‰å…ƒç´ æµ‹è¯•
[Custom] @Element InteractiveCard from Card {
    // åˆ é™¤åŸæœ‰å…ƒç´ 
    delete div[1];  // åˆ é™¤ç¬¬äºŒä¸ªdiv
    
    // æ’å…¥æ–°å…ƒç´ 
    insert after div[0] {
        button {
            class: card-action;
            text { ç‚¹å‡»æˆ‘ }
        }
    }
    
    // æ›¿æ¢å…ƒç´ 
    replace div[0] {
        h3 {
            class: card-title;
            text { äº¤äº’å¼å¡ç‰‡ }
        }
    }
}

// 3.2 è‡ªå®šä¹‰æ ·å¼ç»„æµ‹è¯•
[Custom] @Style FlexLayout {
    display,
    justify-content,
    align-items;
}

[Custom] @Style GridLayout {
    display,
    grid-template-columns,
    grid-gap;
}

// 3.3 è‡ªå®šä¹‰å˜é‡ç»„æµ‹è¯•
[Custom] @Var AppTheme {
    primaryColor: "#2563eb";
    textColor: "#1f2937";
    backgroundColor: "#f9fafb";
}

// 3.4 ç´¢å¼•è®¿é—®æµ‹è¯•
[Custom] @Element ModifiedList from List {
    // ä¸ºç¬¬ä¸€ä¸ªliæ·»åŠ æ ·å¼
    li[0] {
        style {
            font-weight: bold;
            color: #2563eb;
        }
    }
    
    // åˆ é™¤ç¬¬ä¸‰ä¸ªli
    delete li[2];
    
    // ä¸ºç¬¬äºŒä¸ªliæ·»åŠ ç‰¹æ®Šç±»
    li[1] {
        class: special-item;
    }
}

// ============================================================================
// 4. åŸå§‹åµŒå…¥ç³»ç»Ÿæµ‹è¯•
// ============================================================================

// 4.1 HTMLåµŒå…¥æµ‹è¯•
[Origin] @Html CustomHeader {
    <header class="site-header">
        <nav class="main-nav">
            <a href="/">é¦–é¡µ</a>
            <a href="/about">å…³äº</a>
            <a href="/contact">è”ç³»</a>
        </nav>
    </header>
}

// 4.2 æ ·å¼åµŒå…¥æµ‹è¯•
[Origin] @Style Animations {
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes slideIn {
        from { transform: translateX(-100%); }
        to { transform: translateX(0); }
    }
    
    .fade-in {
        animation: fadeIn 0.5s ease-in-out;
    }
    
    .slide-in {
        animation: slideIn 0.3s ease-out;
    }
}

// 4.3 è„šæœ¬åµŒå…¥æµ‹è¯•
[Origin] @JavaScript Utils {
    function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }
    
    function throttle(func, limit) {
        let inThrottle;
        return function() {
            const args = arguments;
            const context = this;
            if (!inThrottle) {
                func.apply(context, args);
                inThrottle = true;
                setTimeout(() => inThrottle = false, limit);
            }
        }
    }
}

// 4.4 è‡ªå®šä¹‰åµŒå…¥ç±»å‹æµ‹è¯•
[Origin] @Vue TodoComponent {
    <template>
        <div class="todo-item">
            <input type="checkbox" v-model="completed">
            <span :class="{ completed }">{{ text }}</span>
            <button @click="remove">åˆ é™¤</button>
        </div>
    </template>
    
    <script>
    export default {
        props: ['text', 'completed'],
        methods: {
            remove() {
                this.$emit('remove');
            }
        }
    }
    </script>
    
    <style scoped>
    .completed {
        text-decoration: line-through;
        opacity: 0.6;
    }
    </style>
}

[Origin] @React CounterComponent {
    import React, { useState } from 'react';
    
    function Counter({ initialValue = 0 }) {
        const [count, setCount] = useState(initialValue);
        
        return (
            <div className="counter">
                <h3>è®¡æ•°å™¨: {count}</h3>
                <button onClick={() => setCount(count + 1)}>å¢åŠ </button>
                <button onClick={() => setCount(count - 1)}>å‡å°‘</button>
                <button onClick={() => setCount(0)}>é‡ç½®</button>
            </div>
        );
    }
    
    export default Counter;
}

// ============================================================================
// 5. å¯¼å…¥ç³»ç»Ÿæµ‹è¯•
// ============================================================================

// 5.1 åŸºç¡€å¯¼å…¥æµ‹è¯•
[Import] @Html from header as HeaderTemplate
[Import] @Style from theme as ThemeStyle
[Import] @JavaScript from utils as Utils
[Import] @Chtl from ModuleName
[Import] @CJmod from ExtensionName

// 5.2 ç‰¹å®šç±»å‹å¯¼å…¥æµ‹è¯•
[Import] [Custom] @Element ButtonComponent from ui/button
[Import] [Template] @Style BaseStyles from ui/styles
[Import] [Custom] @Var ThemeColors from config/theme

// 5.3 æ‰¹é‡å¯¼å…¥æµ‹è¯•
[Import] [Template] from ui/templates
[Import] [Custom] from components/custom
[Import] [Origin] from assets/origins

// 5.4 é€šé…ç¬¦å¯¼å…¥æµ‹è¯•
[Import] @Chtl from modules/*
[Import] @Chtl from themes/*.cmod
[Import] @Chtl from Chtholly.*
[Import] @Chtl from Chtholly.Effects

// ============================================================================
// 6. å‘½åç©ºé—´ç³»ç»Ÿæµ‹è¯•
// ============================================================================

[Namespace] UI {
    [Namespace] Components {
        [Template] @Element Button {
            button {
                class: ui-button;
                text { UIæŒ‰é’® }
            }
        }
        
        [Template] @Element Input {
            input {
                class: ui-input;
                type: text;
            }
        }
    }
    
    [Namespace] Themes {
        [Template] @Style DarkTheme {
            background: #1f2937;
            color: #f9fafb;
        }
        
        [Template] @Style LightTheme {
            background: #ffffff;
            color: #111827;
        }
    }
}

[Namespace] Layout {
    [Template] @Style Container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }
    
    [Template] @Style Grid {
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 20px;
    }
}

// ============================================================================
// 7. é…ç½®ç³»ç»Ÿæµ‹è¯•
// ============================================================================

[Configuration] @Config ProjectConfig {
    INDEX_INITIAL_COUNT = 0;
    DISABLE_NAME_GROUP = false;
    DEBUG_MODE = true;
    ENABLE_OPTIMIZATION = true;
    
    [Name] {
        CUSTOM_ELEMENT = @Element;
        TEMPLATE_STYLE = @Style;
        IMPORT_CHTL = @Chtl;
        VARIABLE_GROUP = @Var;
    }
    
    [OriginType] {
        ORIGINTYPE_VUE = @Vue;
        ORIGINTYPE_REACT = @React;
        ORIGINTYPE_ANGULAR = @Angular;
        ORIGINTYPE_SVELTE = @Svelte;
    }
}

[Configuration] @Config DevelopmentConfig {
    DEBUG_MODE = true;
    MINIFY_OUTPUT = false;
    SOURCE_MAPS = true;
}

[Configuration] @Config ProductionConfig {
    DEBUG_MODE = false;
    MINIFY_OUTPUT = true;
    SOURCE_MAPS = false;
}

// ============================================================================
// 8. ä¸»HTMLç»“æ„æµ‹è¯•
// ============================================================================

html {
    lang: zh-CN;
    
    head {
        meta {
            charset: UTF-8;
        }
        
        meta {
            name: viewport;
            content: "width=device-width, initial-scale=1.0";
        }
        
        title { 
            text { CHTLè¯­æ³•å…¨é¢æµ‹è¯•é¡µé¢ } 
        }
        
        // æµ‹è¯•åµŒå…¥åŸå§‹æ ·å¼
        style {
            // å…¨å±€é‡ç½®æ ·å¼
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                line-height: 1.6;
                color: #333;
            }
        }
    }
    
    body {
        // ====================================================================
        // åŸºç¡€è¯­æ³•ç‰¹æ€§æµ‹è¯•
        // ====================================================================
        
        header {
            class: main-header;
            id: site-header;
            
            style {
                .main-header {
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    padding: 40px 0;
                    text-align: center;
                }
                
                // æµ‹è¯•ä¼ªç±»é€‰æ‹©å™¨
                .main-header:hover {
                    background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
                }
                
                // æµ‹è¯•ä¼ªå…ƒç´ é€‰æ‹©å™¨
                .main-header::before {
                    content: "ğŸ¯";
                    margin-right: 10px;
                }
            }
            
            h1 {
                text { CHTLè¯­æ³•å…¨é¢æµ‹è¯• }
                margin: 0;
                font-size: 2.5rem;
            }
            
            p {
                text { æµ‹è¯•CHTLè¯­æ³•æ–‡æ¡£ä¸­çš„æ‰€æœ‰ç‰¹æ€§ }
                margin: 10px 0 0 0;
                font-size: 1.2rem;
                opacity: 0.9;
            }
        }
        
        // ====================================================================
        // æ–‡æœ¬èŠ‚ç‚¹å’Œå­—é¢é‡æµ‹è¯•
        // ====================================================================
        
        section {
            class: text-literals-test;
            
            style {
                .text-literals-test {
                    padding: 40px 20px;
                    max-width: 1200px;
                    margin: 0 auto;
                }
            }
            
            h2 {
                text { æ–‡æœ¬èŠ‚ç‚¹å’Œå­—é¢é‡æµ‹è¯• }
                color: #2563eb;
                margin-bottom: 20px;
            }
            
            div {
                class: literal-examples;
                
                p {
                    text { è¿™æ˜¯æ— ä¿®é¥°å­—é¢é‡æ–‡æœ¬ }
                }
                
                p {
                    text { "è¿™æ˜¯åŒå¼•å·å­—ç¬¦ä¸²æ–‡æœ¬" }
                }
                
                p {
                    text { 'è¿™æ˜¯å•å¼•å·å­—ç¬¦ä¸²æ–‡æœ¬' }
                }
            }
        }
        
        // ====================================================================
        // CEå¯¹ç­‰å¼æµ‹è¯•
        // ====================================================================
        
        section {
            class: ce-equality-test;
            
            div {
                class: colon-syntax;   // ä½¿ç”¨å†’å·
                id = equal-syntax;     // ä½¿ç”¨ç­‰å·ï¼Œå®Œå…¨ç­‰ä»·
                data-test: "ce-equality";
                
                style {
                    .colon-syntax {
                        border: 2px solid #10b981;
                        padding: 15px;
                        margin: 10px 0;
                    }
                }
                
                text { CEå¯¹ç­‰å¼æµ‹è¯•ï¼šå†’å·å’Œç­‰å·å®Œå…¨ç­‰ä»· }
            }
        }
        
        // ====================================================================
        // å±æ€§ç³»ç»Ÿæµ‹è¯•
        // ====================================================================
        
        section {
            class: attributes-test;
            
            div {
                id: attribute-box;
                class: test-container;
                data-value: 123;
                data-string: "æµ‹è¯•å­—ç¬¦ä¸²";
                data-boolean: true;
                aria-label: "å±æ€§æµ‹è¯•å®¹å™¨";
                
                style {
                    .test-container {
                        background: #f0f9ff;
                        border: 1px solid #0ea5e9;
                        padding: 20px;
                        margin: 20px 0;
                        border-radius: 8px;
                    }
                }
                
                h3 {
                    text { å±æ€§ç³»ç»Ÿæµ‹è¯• }
                    color: #0ea5e9;
                }
                
                p {
                    text { æµ‹è¯•å„ç§HTMLå±æ€§çš„è®¾ç½®å’Œä½¿ç”¨ }
                }
            }
        }
        
        // ====================================================================
        // æ ·å¼ç³»ç»Ÿæµ‹è¯•
        // ====================================================================
        
        section {
            class: style-system-test;
            
            style {
                .style-system-test {
                    padding: 40px 20px;
                    background: #fafafa;
                }
            }
            
            h2 {
                text { æ ·å¼ç³»ç»Ÿæµ‹è¯• }
                color: #7c3aed;
                margin-bottom: 30px;
            }
            
            // æµ‹è¯•å±€éƒ¨æ ·å¼å—
            div {
                class: local-style-demo;
                
                style {
                    // å†…è”æ ·å¼
                    padding: 20px;
                    margin: 10px;
                    
                    // ç±»é€‰æ‹©å™¨ - è‡ªåŠ¨æ·»åŠ åˆ°å…¨å±€æ ·å¼
                    .local-style-demo {
                        background: #fef3c7;
                        border-radius: 8px;
                        border: 2px solid #f59e0b;
                    }
                    
                    // IDé€‰æ‹©å™¨
                    #special-element {
                        color: #dc2626;
                        font-weight: bold;
                    }
                    
                    // ä¼ªç±»é€‰æ‹©å™¨
                    .local-style-demo:hover {
                        background: #fde68a;
                        transform: translateY(-2px);
                        transition: all 0.3s ease;
                    }
                    
                    // ä¼ªå…ƒç´ é€‰æ‹©å™¨
                    .local-style-demo::after {
                        content: " âœ¨";
                    }
                }
                
                h3 {
                    text { å±€éƒ¨æ ·å¼å—æµ‹è¯• }
                }
                
                p {
                    id: special-element;
                    text { è¿™ä¸ªæ®µè½ä½¿ç”¨äº†IDé€‰æ‹©å™¨æ ·å¼ }
                }
            }
            
            // æµ‹è¯•è‡ªåŠ¨æ·»åŠ è§„åˆ™
            div {
                // æ²¡æœ‰æ˜ç¡®çš„classæˆ–idï¼Œæµ‹è¯•è‡ªåŠ¨æ·»åŠ 
                style {
                    .auto-added-class {
                        background: #ddd6fe;
                        padding: 15px;
                        border-radius: 6px;
                    }
                    
                    #auto-added-id {
                        border: 1px solid #8b5cf6;
                    }
                }
                
                text { æµ‹è¯•è‡ªåŠ¨æ·»åŠ è§„åˆ™ï¼šç¼ºä»€ä¹ˆï¼Œè‡ªåŠ¨æ·»åŠ ä»€ä¹ˆ }
            }
        }
        
        // ====================================================================
        // æ¨¡æ¿ä½¿ç”¨æµ‹è¯•
        // ====================================================================
        
        section {
            class: template-usage-test;
            
            style {
                .template-usage-test {
                    padding: 40px 20px;
                }
            }
            
            h2 {
                text { æ¨¡æ¿ä½¿ç”¨æµ‹è¯• }
                color: #059669;
                margin-bottom: 30px;
            }
            
            // ä½¿ç”¨å˜é‡ç»„
            div {
                style {
                    color: ThemeColors(primaryColor);
                    background: ThemeColors(secondaryColor);
                    padding: Spacing(medium);
                    margin: Spacing(small) 0;
                    border-radius: 8px;
                }
                
                text { ä½¿ç”¨å˜é‡ç»„ThemeColorså’ŒSpacing }
            }
            
            // ä½¿ç”¨è‡ªå®šä¹‰æ ·å¼ç»„
            div {
                style {
                    @Style FlexLayout {
                        display: flex;
                        justify-content: center;
                        align-items: center;
                    }
                    
                    height: 100px;
                    background: #ecfdf5;
                    border: 1px solid #10b981;
                    border-radius: 8px;
                    margin: 20px 0;
                }
                
                text { ä½¿ç”¨è‡ªå®šä¹‰æ ·å¼ç»„FlexLayout }
            }
            
            // ä½¿ç”¨å…ƒç´ æ¨¡æ¿
            Card
            
            // ä½¿ç”¨è‡ªå®šä¹‰å…ƒç´ 
            InteractiveCard
        }
        
        // ====================================================================
        // çº¦æŸç³»ç»Ÿæµ‹è¯•
        // ====================================================================
        
        section {
            class: constraint-test;
            
            div {
                class: safe-content;
                
                // çº¦æŸå¤šç§ç±»å‹ï¼ˆé“¾å¼è¯­æ³•ï¼‰
                except @Html, [Custom], [Template];
                
                style {
                    .safe-content {
                        background: #fef2f2;
                        border: 2px solid #ef4444;
                        padding: 20px;
                        margin: 20px 0;
                        border-radius: 8px;
                    }
                }
                
                h3 {
                    text { çº¦æŸç³»ç»Ÿæµ‹è¯• }
                    color: #dc2626;
                }
                
                // åªå…è®¸åŸºç¡€å…ƒç´ 
                p { 
                    text { è¿™ä¸ªåŒºåŸŸè¢«çº¦æŸï¼Œåªèƒ½åŒ…å«åŸºç¡€HTMLå…ƒç´  } 
                }
                
                ul {
                    li { text { åˆ—è¡¨é¡¹1 } }
                    li { text { åˆ—è¡¨é¡¹2 } }
                    li { text { åˆ—è¡¨é¡¹3 } }
                }
            }
        }
        
        // ====================================================================
        // CHTL JSæ‰©å±•è¯­æ³•æµ‹è¯•
        // ====================================================================
        
        section {
            class: chtljs-test;
            
            style {
                .chtljs-test {
                    padding: 40px 20px;
                    background: #f0f9ff;
                }
                
                .interactive-button {
                    background: #3b82f6;
                    color: white;
                    border: none;
                    padding: 12px 24px;
                    border-radius: 6px;
                    cursor: pointer;
                    margin: 10px;
                    transition: all 0.3s ease;
                }
                
                .interactive-button:hover {
                    background: #2563eb;
                    transform: translateY(-2px);
                }
                
                .animation-target {
                    width: 100px;
                    height: 100px;
                    background: #10b981;
                    border-radius: 50%;
                    margin: 20px auto;
                    transition: all 0.3s ease;
                }
            }
            
            h2 {
                text { CHTL JSæ‰©å±•è¯­æ³•æµ‹è¯• }
                color: #1d4ed8;
                margin-bottom: 30px;
            }
            
            // æµ‹è¯•å¢å¼ºé€‰æ‹©å™¨å’Œç®­å¤´æ“ä½œç¬¦
            button {
                class: interactive-button;
                id: selector-test-btn;
                
                script {
                    // æµ‹è¯•å„ç§é€‰æ‹©å™¨
                    {{.interactive-button}}->style->display = 'inline-block';
                    {{#selector-test-btn}}->setAttribute('data-tested', 'true');
                    {{button}}->style->fontFamily = 'Arial, sans-serif';
                    {{&}}->setAttribute('data-self', 'current-element');
                    
                    // æµ‹è¯•ç®­å¤´æ“ä½œç¬¦é“¾å¼è°ƒç”¨
                    {{&}}->classList->add('tested')->style->opacity = '1';
                }
                
                text { é€‰æ‹©å™¨æµ‹è¯•æŒ‰é’® }
            }
            
            // æµ‹è¯•å¢å¼ºç›‘å¬å™¨
            button {
                class: interactive-button;
                id: listener-test-btn;
                
                script {
                    {{&}}->listen({
                        click: function(e) {
                            console.log('æŒ‰é’®è¢«ç‚¹å‡»');
                            {{&}}->style->background = '#059669';
                        },
                        mouseenter: function(e) {
                            {{&}}->classList->add('hover');
                        },
                        mouseleave: function(e) {
                            {{&}}->classList->remove('hover');
                        },
                        focus: function(e) {
                            {{&}}->style->outline = '2px solid #3b82f6';
                        },
                        blur: function(e) {
                            {{&}}->style->outline = 'none';
                        }
                    });
                }
                
                text { ç›‘å¬å™¨æµ‹è¯•æŒ‰é’® }
            }
            
            // æµ‹è¯•äº‹ä»¶å§”æ‰˜
            div {
                class: delegation-container;
                
                style {
                    .delegation-container {
                        border: 2px dashed #6366f1;
                        padding: 20px;
                        margin: 20px 0;
                    }
                    
                    .delegated-item {
                        background: #e0e7ff;
                        padding: 10px;
                        margin: 5px;
                        border-radius: 4px;
                        cursor: pointer;
                    }
                }
                
                script {
                    {{&}}->delegate({
                        target: {{.delegated-item}},
                        click: function(e) {
                            console.log('å§”æ‰˜ç‚¹å‡»äº‹ä»¶è§¦å‘');
                            {{this}}->style->background = '#c7d2fe';
                        },
                        mouseenter: function(e) {
                            {{this}}->style->transform = 'scale(1.05)';
                        },
                        mouseleave: function(e) {
                            {{this}}->style->transform = 'scale(1)';
                        }
                    });
                }
                
                h3 {
                    text { äº‹ä»¶å§”æ‰˜æµ‹è¯• }
                }
                
                div {
                    class: delegated-item;
                    text { å§”æ‰˜é¡¹ç›® 1 }
                }
                
                div {
                    class: delegated-item;
                    text { å§”æ‰˜é¡¹ç›® 2 }
                }
                
                div {
                    class: delegated-item;
                    text { å§”æ‰˜é¡¹ç›® 3 }
                }
            }
            
            // æµ‹è¯•åŠ¨ç”»ç³»ç»Ÿ
            div {
                class: animation-test;
                
                style {
                    .animation-test {
                        text-align: center;
                        padding: 30px;
                    }
                }
                
                h3 {
                    text { åŠ¨ç”»ç³»ç»Ÿæµ‹è¯• }
                }
                
                div {
                    class: animation-target;
                }
                
                button {
                    class: interactive-button;
                    
                    script {
                        {{&}}->listen({
                            click: function() {
                                animate({
                                    target: {{.animation-target}},
                                    duration: 1000,
                                    easing: 'ease-out',
                                    properties: {
                                        opacity: [1, 0.5, 1],
                                        transform: ['scale(1)', 'scale(1.2)', 'scale(1)'],
                                        background: ['#10b981', '#f59e0b', '#10b981']
                                    },
                                    onComplete: function() {
                                        console.log('åŠ¨ç”»å®Œæˆ');
                                    }
                                });
                            }
                        });
                    }
                    
                    text { å¯åŠ¨åŠ¨ç”» }
                }
            }
            
            // æµ‹è¯•è™šå¯¹è±¡
            div {
                class: virtual-object-test;
                
                script {
                    vir UIManager = listen({
                        init: function() {
                            console.log('åˆå§‹åŒ–UIç®¡ç†å™¨');
                            {{.virtual-object-test}}->style->background = '#ecfdf5';
                        },
                        destroy: function() {
                            console.log('é”€æ¯UIç®¡ç†å™¨');
                            {{.virtual-object-test}}->style->background = '#fef2f2';
                        },
                        toggle: function() {
                            const current = {{.virtual-object-test}}->style->background;
                            if (current.includes('ecfdf5')) {
                                UIManager->destroy();
                            } else {
                                UIManager->init();
                            }
                        }
                    });
                    
                    // ä½¿ç”¨è™šå¯¹è±¡ï¼ˆç¼–è¯‘ä¸ºå‡½æ•°å¼•ç”¨ï¼‰
                    UIManager->init();
                }
                
                style {
                    .virtual-object-test {
                        padding: 20px;
                        border: 2px solid #059669;
                        border-radius: 8px;
                        margin: 20px 0;
                    }
                }
                
                h3 {
                    text { è™šå¯¹è±¡æµ‹è¯• }
                }
                
                p {
                    text { è™šå¯¹è±¡æ˜¯ç¼–è¯‘æ—¶è¯­æ³•ç³–ï¼Œä¸äº§ç”Ÿè¿è¡Œæ—¶å¯¹è±¡ }
                }
                
                button {
                    class: interactive-button;
                    
                    script {
                        {{&}}->listen({
                            click: function() {
                                UIManager->toggle();
                            }
                        });
                    }
                    
                    text { åˆ‡æ¢è™šå¯¹è±¡çŠ¶æ€ }
                }
            }
        }
        
        // ====================================================================
        // åˆ é™¤æ“ä½œè¯­æ³•æµ‹è¯•
        // ====================================================================
        
        section {
            class: deletion-test;
            
            style {
                .deletion-test {
                    padding: 40px 20px;
                    background: #fffbeb;
                }
            }
            
            h2 {
                text { åˆ é™¤æ“ä½œæµ‹è¯• }
                color: #d97706;
                margin-bottom: 30px;
            }
            
            p {
                text { åˆ é™¤æ“ä½œåœ¨è‡ªå®šä¹‰å’Œæ¨¡æ¿ä¸­ä½¿ç”¨ï¼Œè¿™é‡Œå±•ç¤ºæ¦‚å¿µ }
                font-style: italic;
                color: #92400e;
            }
        }
        
        // ====================================================================
        // é“¾å¼è¯­æ³•æµ‹è¯•
        // ====================================================================
        
        section {
            class: chaining-test;
            
            // æµ‹è¯•æ”¯æŒé“¾å¼çš„exceptçº¦æŸ
            except @Html, [Custom], [Template];
            
            style {
                .chaining-test {
                    padding: 40px 20px;
                    background: #f0fdf4;
                }
            }
            
            h2 {
                text { é“¾å¼è¯­æ³•æµ‹è¯• }
                color: #059669;
                margin-bottom: 30px;
            }
            
            p {
                text { exceptçº¦æŸæ”¯æŒé“¾å¼è¯­æ³•ï¼Œdeleteå±æ€§ä¹Ÿæ”¯æŒé“¾å¼ }
            }
            
            div {
                class: chain-demo;
                
                style {
                    .chain-demo {
                        border: 2px solid #10b981;
                        padding: 15px;
                        border-radius: 8px;
                    }
                }
                
                text { è¿™ä¸ªdivå—åˆ°é“¾å¼çº¦æŸé™åˆ¶ }
            }
        }
        
        // ====================================================================
        // å‘½åç©ºé—´ä½¿ç”¨æµ‹è¯•
        // ====================================================================
        
        section {
            class: namespace-usage-test;
            
            style {
                .namespace-usage-test {
                    padding: 40px 20px;
                    background: #fdf2f8;
                }
            }
            
            h2 {
                text { å‘½åç©ºé—´ä½¿ç”¨æµ‹è¯• }
                color: #be185d;
                margin-bottom: 30px;
            }
            
            // ä½¿ç”¨å‘½åç©ºé—´ä¸­çš„å…ƒç´ ï¼ˆæ¦‚å¿µæ¼”ç¤ºï¼‰
            div {
                class: namespace-demo;
                
                style {
                    .namespace-demo {
                        border: 2px solid #ec4899;
                        padding: 20px;
                        border-radius: 8px;
                    }
                }
                
                text { å‘½åç©ºé—´å…ƒç´ ä½¿ç”¨ï¼šUI::Components::Button, UI::Themes::DarkTheme }
            }
        }
        
        // ====================================================================
        // åŸå§‹åµŒå…¥ä½¿ç”¨æµ‹è¯•
        // ====================================================================
        
        section {
            class: origin-embedding-test;
            
            style {
                .origin-embedding-test {
                    padding: 40px 20px;
                    background: #f8fafc;
                }
            }
            
            h2 {
                text { åŸå§‹åµŒå…¥æµ‹è¯• }
                color: #475569;
                margin-bottom: 30px;
            }
            
            // ä½¿ç”¨åµŒå…¥çš„HTML
            CustomHeader
            
            div {
                class: embedding-demo;
                
                style {
                    .embedding-demo {
                        border: 2px solid #64748b;
                        padding: 20px;
                        border-radius: 8px;
                        margin: 20px 0;
                    }
                }
                
                text { åŸå§‹åµŒå…¥å†…å®¹å·²åœ¨ä¸Šæ–¹æ˜¾ç¤º }
            }
        }
        
        // ====================================================================
        // æ— åºå’Œå¯é€‰é”®å€¼å¯¹æµ‹è¯•
        // ====================================================================
        
        section {
            class: keyvalue-test;
            
            style {
                .keyvalue-test {
                    padding: 40px 20px;
                    background: #f1f5f9;
                }
            }
            
            h2 {
                text { é”®å€¼å¯¹è¯­æ³•æµ‹è¯• }
                color: #334155;
                margin-bottom: 30px;
            }
            
            div {
                class: keyvalue-demo;
                
                script {
                    // æµ‹è¯•æ— åºé”®å€¼å¯¹
                    const config = {
                        timeout: 5000,
                        retries: 3,
                        url: "https://api.example.com",
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": "Bearer token123"
                        }
                    };
                    
                    // æµ‹è¯•å¯é€‰é”®å€¼å¯¹å‡½æ•°
                    function createRequest({
                        url,
                        method = "GET",
                        timeout?,
                        headers?,
                        data?
                    }) {
                        console.log('åˆ›å»ºè¯·æ±‚:', { url, method, timeout, headers, data });
                        return { url, method, timeout, headers, data };
                    }
                    
                    // ä½¿ç”¨å‡½æ•°
                    {{&}}->listen({
                        click: function() {
                            const request = createRequest({
                                url: "https://test.com",
                                method: "POST",
                                timeout: 3000,
                                data: { test: true }
                            });
                            console.log('è¯·æ±‚é…ç½®:', request);
                        }
                    });
                }
                
                style {
                    .keyvalue-demo {
                        border: 2px solid #0ea5e9;
                        padding: 20px;
                        border-radius: 8px;
                        cursor: pointer;
                    }
                    
                    .keyvalue-demo:hover {
                        background: #e0f2fe;
                    }
                }
                
                text { ç‚¹å‡»æµ‹è¯•æ— åºå’Œå¯é€‰é”®å€¼å¯¹åŠŸèƒ½ }
            }
        }
        
        // ====================================================================
        // å˜é‡ç»„ç‰¹ä¾‹åŒ–æµ‹è¯•
        // ====================================================================
        
        section {
            class: var-specialization-test;
            
            style {
                .var-specialization-test {
                    padding: 40px 20px;
                    background: #fefce8;
                }
            }
            
            h2 {
                text { å˜é‡ç»„ç‰¹ä¾‹åŒ–æµ‹è¯• }
                color: #a16207;
                margin-bottom: 30px;
            }
            
            div {
                class: specialization-demo;
                
                style {
                    .specialization-demo {
                        // å˜é‡ç»„ç‰¹ä¾‹åŒ–
                        color: AppTheme(textColor = "#374151");
                        background: AppTheme(primaryColor);
                        padding: 20px;
                        border-radius: 8px;
                        margin: 20px 0;
                    }
                }
                
                text { è¿™ä¸ªå…ƒç´ ä½¿ç”¨äº†å˜é‡ç»„ç‰¹ä¾‹åŒ– }
            }
        }
        
        // ====================================================================
        // æ ·å¼ç»„ç»§æ‰¿æµ‹è¯•
        // ====================================================================
        
        section {
            class: inheritance-test;
            
            style {
                .inheritance-test {
                    padding: 40px 20px;
                    background: #fdf4ff;
                }
            }
            
            h2 {
                text { æ ·å¼ç»„ç»§æ‰¿æµ‹è¯• }
                color: #a21caf;
                margin-bottom: 30px;
            }
            
            button {
                class: extended-button;
                
                style {
                    .extended-button {
                        // ç»§æ‰¿ButtonBaseæ ·å¼
                        padding: 12px 24px;
                        border: none;
                        border-radius: 6px;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        
                        // ExtendedButtonçš„é¢å¤–æ ·å¼
                        background: #10b981;
                        font-weight: bold;
                        text-transform: uppercase;
                    }
                    
                    .extended-button:hover {
                        background: #059669;
                        transform: translateY(-1px);
                    }
                }
                
                text { ç»§æ‰¿æ ·å¼æŒ‰é’® }
            }
        }
        
        // ====================================================================
        // é¡µè„š
        // ====================================================================
        
        footer {
            class: main-footer;
            
            style {
                .main-footer {
                    background: #1f2937;
                    color: #f9fafb;
                    text-align: center;
                    padding: 40px 20px;
                    margin-top: 60px;
                }
            }
            
            div {
                class: footer-content;
                
                style {
                    .footer-content {
                        max-width: 1200px;
                        margin: 0 auto;
                    }
                }
                
                h3 {
                    text { CHTLè¯­æ³•å…¨é¢æµ‹è¯•å®Œæˆ }
                    margin-bottom: 15px;
                    color: #60a5fa;
                }
                
                p {
                    text { æœ¬é¡µé¢æµ‹è¯•äº†CHTLè¯­æ³•æ–‡æ¡£ä¸­çš„æ‰€æœ‰æ ¸å¿ƒç‰¹æ€§ }
                    opacity: 0.8;
                    margin-bottom: 10px;
                }
                
                p {
                    text { åŒ…æ‹¬ï¼šåŸºç¡€è¯­æ³•ã€æ ·å¼ç³»ç»Ÿã€æ¨¡æ¿ç³»ç»Ÿã€è‡ªå®šä¹‰ç³»ç»Ÿã€çº¦æŸç³»ç»Ÿã€CHTL JSæ‰©å±•ç­‰ }
                    opacity: 0.6;
                    font-size: 0.9rem;
                }
            }
        }
    }
}