// 综合CHTL测试项目 - 严格按照语法文档第1-1531行的所有语法特性

// 变量组模板 - 语法文档第221-229行
[Template] @Var ThemeColor
{
    primaryColor: "rgb(255, 192, 203)";
    secondaryColor: "rgb(253, 144, 162)";
    textColor: "black";
}

// 样式组模板 - 语法文档第161-178行
[Template] @Style DefaultText
{
    color: "black";
    line-height: 1.6;
    font-family: "Arial, sans-serif";
}

// 元素模板 - 语法文档第180-218行
[Template] @Element Card
{
    div
    {
        class: card;
        
        style
        {
            width: 300px;
            height: 200px;
            background-color: ThemeColor(primaryColor);
            border-radius: 8px;
            padding: 20px;
        }
        
        div
        {
            class: card-header;
            
            text
            {
                卡片标题
            }
            
            style
            {
                @Style DefaultText;
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 10px;
            }
        }
        
        div
        {
            class: card-content;
            
            text
            {
                这是卡片内容
            }
            
            style
            {
                @Style DefaultText;
                color: ThemeColor(textColor);
            }
        }
    }
}

// 自定义样式组 - 语法文档第294-325行
[Custom] @Style ButtonStyle
{
    background-color: ThemeColor(secondaryColor);
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    cursor: pointer;
}

// 自定义元素 - 语法文档第326-390行
[Custom] @Element InteractiveButton
{
    button
    {
        class: interactive-btn;
        
        text
        {
            点击我
        }
        
        style
        {
            @Style ButtonStyle;
            
            &:hover
            {
                background-color: ThemeColor(primaryColor);
                transform: scale(1.05);
            }
        }
        
        script
        {
            // CHTL JS语法 - 增强选择器 (语法文档第1130-1158行)
            {{.interactive-btn}}->listen({
                click: () => {
                    console.log('Interactive button clicked!');
                    
                    // 使用动画 - 语法文档第1233-1272行
                    const anim = animate({
                        target: {{.interactive-btn}},
                        duration: 300,
                        easing: 'ease-in-out',
                        
                        begin: {
                            transform: 'scale(1.05)'
                        },
                        
                        when: [
                            {
                                at: 0.5;
                                transform: 'scale(1.1)',
                                opacity: 0.8
                            }
                        ],
                        
                        end: {
                            transform: 'scale(1.0)',
                            opacity: 1.0
                        }
                    });
                },
                
                mouseenter: () => {
                    {{.interactive-btn}}->style->backgroundColor = ThemeColor(primaryColor);
                }
            });
            
            // 事件委托 - 语法文档第1215-1231行
            {{body}}->delegate({
                target: {{.interactive-btn}},
                dblclick: () => {
                    console.log('Double clicked via delegation!');
                }
            });
        }
    }
}

// 主页面结构
html
{
    head
    {
        title
        {
            text
            {
                CHTL综合测试项目
            }
        }
        
        style
        {
            // 全局样式 - 语法文档第90行：不使用局部样式块功能
            body {
                margin: 0;
                padding: 20px;
                font-family: Arial, sans-serif;
                background-color: #f5f5f5;
            }
            
            .container {
                max-width: 800px;
                margin: 0 auto;
            }
        }
    }
    
    body
    {
        div
        {
            class: container;
            
            h1
            {
                text
                {
                    CHTL语法综合演示
                }
                
                style
                {
                    color: ThemeColor(textColor);
                    text-align: center;
                    margin-bottom: 30px;
                }
            }
            
            // 使用元素模板 - 语法文档第217行
            @Element Card;
            
            // 使用自定义元素
            @Element InteractiveButton;
            
            // 演示索引访问 - 语法文档第462-466行
            div
            {
                class: demo-section;
                
                h2
                {
                    text
                    {
                        索引访问演示
                    }
                }
                
                div
                {
                    class: item;
                    text { 第一个项目 }
                }
                
                div
                {
                    class: item;
                    text { 第二个项目 }
                }
                
                div
                {
                    class: item;
                    text { 第三个项目 }
                }
                
                script
                {
                    // 访问特定索引的元素
                    {{.item[0]}}->style->color = 'red';
                    {{.item[1]}}->style->color = 'blue';
                    {{.item[2]}}->style->color = 'green';
                }
            }
            
            // 演示虚对象 - 语法文档第1274-1299行
            script
            {
                // 虚对象语法
                vir ButtonController = listen({
                    click: () => {
                        console.log('Virtual object click handler');
                    },
                    
                    hover: () => {
                        console.log('Virtual object hover handler');
                    }
                });
                
                // 调用虚对象方法
                ButtonController->click();
            }
        }
    }
}

// 演示约束 - 语法文档第1062-1097行
[Custom] @Element RestrictedBox
{
    div
    {
        except span, button;  // 精确约束：禁止使用span和button
        
        div
        {
            text
            {
                这个区域不能包含span和button
            }
        }
    }
}

// 演示继承 - 语法文档第272-286行
[Template] @Style ExtendedButtonStyle
{
    inherit @Style ButtonStyle;
    font-size: 16px;
    transition: all 0.3s ease;
}

// 演示配置 - 语法文档第827-883行
[Configuration] @Config TestConfig
{
    DEBUG_MODE = true;
    ANIMATION_DURATION = 300;
    
    [Name]
    {
        BUTTON_CLASS = @Style;
        CARD_ELEMENT = @Element;
    }
}